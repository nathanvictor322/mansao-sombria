<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>A Mans√£o Sombria</title>
    <style>
        /* ... estilo omitido para brevidade ... */
        body {
            background-color: #0a0a0a;
            color: #e0e0e0;
            line-height: 1.6;
            /* restante do CSS */
        }
        /* restante do CSS */
    </style>
</head>
<body>
    <!-- ... estrutura HTML omitida para brevidade ... -->
    <div class="container">
        <header>
            <h1>A MANS√ÉO SOMBRIA</h1>
            <p class="subtitle">Sua sanidade determinar√° seu destino</p>
        </header>
        <div class="game-area">
            <!-- ... sanidade e √°rea de texto ... -->
            <div class="story-text" id="storyText">
                Voc√™ est√° parado diante da Mans√£o Blackwood, uma constru√ß√£o antiga e decadente que h√° anos √© evitada pelos moradores da cidade. A noite est√° escura, sem luar, e o vento sussurra entre as √°rvores mortas do jardim. Voc√™ est√° aqui porque sua irm√£ desapareceu ap√≥s entrar nesta mans√£o tr√™s dias atr√°s. As √∫nicas pistas que voc√™ tem s√£o uma carta enigm√°tica e um di√°rio antigo que ela deixou para tr√°s. A porta da frente est√° entreaberta, rangendo levemente com o vento. O que voc√™ faz?
            </div>
            <div class="choices-container" id="choicesContainer"></div>
        </div>
    </div>
    <div class="game-over" id="gameOverScreen">
        <h2 id="gameOverTitle">FIM DE JOGO</h2>
        <p id="gameOverText"></p>
        <button class="restart-btn" id="restartBtn">JOGAR NOVAMENTE</button>
    </div>
    <!-- √Åudios omitidos para brevidade -->
    <script>
        // Elementos do DOM
        const storyText = document.getElementById('storyText');
        const choicesContainer = document.getElementById('choicesContainer');
        const sanityFill = document.getElementById('sanityFill');
        const sanityText = document.getElementById('sanityText');
        const sanityValue = document.getElementById('sanityValue');
        const gameOverScreen = document.getElementById('gameOverScreen');
        const gameOverTitle = document.getElementById('gameOverTitle');
        const gameOverText = document.getElementById('gameOverText');
        const restartBtn = document.getElementById('restartBtn');
        const footstepsText = document.getElementById('footstepsText');
        const soundToggle = document.getElementById('soundToggle');
        // Elementos de √°udio
        const bgSound = document.getElementById('bgSound');
        const clickSound = document.getElementById('clickSound');
        const sanityLowSound = document.getElementById('sanityLowSound');
        const gameOverSound = document.getElementById('gameOverSound');
        // Estado do jogo
        let gameState = {
            sanity: 100,
            currentScene: "start",
            soundEnabled: true,
            visitedScenes: new Set(["start"])
        };
        // Sistema de √°udio (ligar/desligar som de fundo)
        soundToggle.addEventListener('click', () => {
            gameState.soundEnabled = !gameState.soundEnabled;
            soundToggle.textContent = gameState.soundEnabled ? "üîä" : "üîá";
            if (gameState.soundEnabled) {
                bgSound.play().catch(e => console.log("Autoplay bloqueado"));
            } else {
                bgSound.pause();
            }
        });
        setTimeout(() => {
            if (gameState.soundEnabled) {
                bgSound.volume = 0.3;
                bgSound.play().catch(e => console.log("Autoplay bloqueado"));
            }
        }, 1000);
        // Mensagens aleat√≥rias de passos
        const footstepsMessages = [ /* ... array de mensagens ... */ ];
        function updateFootsteps() {
            if (Math.random() > 0.7) {
                const msg = footstepsMessages[Math.floor(Math.random()*footstepsMessages.length)];
                footstepsText.textContent = msg;
                setTimeout(() => { footstepsText.textContent = ""; }, 5000);
            }
        }
        setInterval(updateFootsteps, 10000);
        // **Cenas do jogo (todas as rotas e textos)**
        const scenes = {
            start: {
                text: "Voc√™ est√° parado diante da Mans√£o Blackwood... A porta da frente est√° entreaberta. O que voc√™ faz?",
                choices: [
                    { text: "Entrar pela porta da frente", next: "entrance", sanityChange: -5 },
                    { text: "Dar a volta e entrar pelos fundos", next: "backdoor", sanityChange: 0 },
                    { text: "Procurar por uma janela aberta", next: "window", sanityChange: -2 },
                    { text: "Desistir e voltar para a cidade", next: "giveup", sanityChange: 10 }
                ]
            },
            entrance: {
                text: "Voc√™ empurra a pesada porta... √Ä sua esquerda, uma sala de estar; √† direita, um corredor escuro. Pegadas na poeira levam escada acima.",
                choices: [
                    { text: "Seguir as pegadas escada acima", next: "stairs", sanityChange: -8 },
                    { text: "Investigar a sala √† esquerda", next: "livingroom", sanityChange: -3 },
                    { text: "Explorar o corredor √† direita", next: "corridor", sanityChange: -5 },
                    { text: "Voltar para fora e reconsiderar", next: "start", sanityChange: 5 }
                ]
            },
            backdoor: {
                text: "Nos fundos, voc√™ encontra uma cozinha de servi√ßo abandonada, porta arrombada. Dentro, m√≥veis quebrados e sangue seco no ch√£o. H√° uma porta para o interior da mans√£o e uma escada que desce ao por√£o.",
                choices: [
                    { text: "Entrar na mans√£o pela cozinha", next: "kitchen", sanityChange: -4 },
                    { text: "Descer a escada para o por√£o", next: "basement", sanityChange: -12 },
                    { text: "Procurar por pistas na cozinha", next: "kitchen_clues", sanityChange: -6 },
                    { text: "Voltar para a frente da mans√£o", next: "start", sanityChange: 0 }
                ]
            },
            window: {
                text: "Voc√™ encontra uma janela quebrada e entra por ela em uma biblioteca empoeirada, cheia de livros antigos. Uma poltrona est√° virada para a lareira apagada. No ch√£o, h√° um livro antigo aberto com uma marca√ß√£o.",
                choices: [
                    { text: "Examinar o livro aberto", next: "book", sanityChange: -8 },
                    { text: "Procurar uma porta de sa√≠da da biblioteca", next: "library_exit", sanityChange: -3 },
                    { text: "Investigar as estantes de livros", next: "bookshelves", sanityChange: -5 },
                    { text: "Voltar pela janela e desistir", next: "start", sanityChange: 2 }
                ]
            },
            giveup: {
                text: "Voc√™ decide que √© loucura continuar. Enquanto se afasta, por√©m, ouve um grito abafado vindo da mans√£o ‚Äì o grito da sua irm√£. Voc√™ recupera parte da sanidade, mas a culpa o assombrar√°.",
                choices: [
                    { text: "Correr de volta para a mans√£o", next: "start", sanityChange: -15 },
                    { text: "Ignorar e seguir para a cidade", next: "city", sanityChange: 20 }
                ]
            },
            stairs: {
                text: "Voc√™ sobe as escadas que rangem... No topo, um corredor longo com portas de ambos os lados, iluminado por uma fraca luz lunar da janela ao fundo. Ouve-se um choro baixo atr√°s de uma porta √† direita. Ao mesmo tempo, uma sombra se move na extremidade do corredor.",
                choices: [
                    { text: "Seguir o som do choro", next: "crying_room", sanityChange: -10 },
                    { text: "Investigar a sombra no fim do corredor", next: "shadow", sanityChange: -15 },
                    { text: "Abrir a primeira porta √† esquerda", next: "bedroom", sanityChange: -7 },
                    { text: "Descer de volta ao sagu√£o", next: "entrance", sanityChange: 3 }
                ]
            },
            crying_room: {
                text: "Voc√™ segue o choro at√© um quarto infantil. Dentro, h√° brinquedos antigos e um ber√ßo. No centro do quarto, de costas para voc√™, uma pequena figura chora. Quando se vira, voc√™ v√™ que **n√£o tem rosto** ‚Äì apenas uma superf√≠cie p√°lida lisa. Ela estende a m√£o e sussurra: 'Por que demorou tanto?'",
                choices: [
                    { text: "Correr para fora do quarto", next: "stairs", sanityChange: -20 },
                    { text: "Perguntar sobre sua irm√£", next: "ask_sister", sanityChange: -15 },
                    { text: "Tentar ajudar a criatura", next: "help_creature", sanityChange: -25 },
                    { text: "Fechar os olhos e contar at√© dez", next: "stairs", sanityChange: -10 }
                ]
            },
            city: {
                text: "Voc√™ vai embora e chama a pol√≠cia na manh√£ seguinte. Eles n√£o encontram nada al√©m de uma casa vazia ‚Äì sua irm√£ nunca √© encontrada. Anos depois, os pesadelos com a mans√£o continuam a atorment√°-lo.",
                gameOver: true,
                title: "FIM SEGURO... MAS A QUE CUSTO?",
                ending: "Voc√™ sobreviveu abandonando sua irm√£. Sua sanidade est√° intacta, mas sua consci√™ncia nunca ter√° paz."
            },
            basement: {
                text: "A escada para o por√£o range a cada passo. O cheiro de decomposi√ß√£o aumenta conforme voc√™ desce. No por√£o √∫mido e escuro, √† luz fraca da lua por uma janelinha, voc√™ v√™ m√≥veis velhos cobertos por len√ß√≥is. No centro h√° uma mesa de madeira com correntes e manchas escuras. De repente, um som de algo sendo arrastado vem de um canto escuro do por√£o.",
                choices: [
                    { text: "Investigar o barulho no canto", next: "noise", sanityChange: -25 },
                    { text: "Examinar a mesa com correntes", next: "table", sanityChange: -20 },
                    { text: "Correr de volta para a cozinha", next: "backdoor", sanityChange: -15 },
                    { text: "Esconder-se atr√°s dos m√≥veis", next: "hide", sanityChange: -10 }
                ]
            },
            noise: {
                text: "Voc√™ se aproxima do canto escuro, cautelosamente. Seus olhos se ajustam e voc√™ v√™ **uma pessoa encolhida no ch√£o**. √â sua irm√£! P√°lida e assustada, ela sussurra: 'Voc√™ veio... Precisamos sair agora! **Ele** vai voltar a qualquer momento!'. Antes que voc√™ responda, passos pesados come√ßam a descer a escada do por√£o...",
                choices: [
                    { text: "Fugir com sua irm√£ pelos fundos", next: "escape", sanityChange: 30 },
                    { text: "Enfrentar o que quer que seja", next: "confront", sanityChange: -30 },
                    { text: "Esconder-se com sua irm√£", next: "hide_together", sanityChange: -15 },
                    { text: "Perguntar quem √© 'ele'", next: "ask_who", sanityChange: -20 }
                ]
            },
            escape: {
                text: "De m√£os dadas com sua irm√£, voc√™ corre escada acima. Os passos da criatura ressoam logo atr√°s. Voc√™s disparam pela cozinha e saem pela porta dos fundos, fugindo para a floresta. De longe, a mans√£o observa silenciosa. Mais tarde, voc√™s avisam a pol√≠cia. Eles n√£o encontram ningu√©m l√° dentro, apenas sinais perturbadores de atividade sinistra. Voc√™ salvou sua irm√£, mas os horrores vividos os assombrar√£o para sempre.",
                gameOver: true,
                title: "FUGITIVOS",
                ending: "Voc√™ resgatou sua irm√£ e escapou da mans√£o. Sua sanidade ficou abalada, mas ambos sobreviveram ‚Äì e est√£o juntos novamente."
            },
            confront: {
                text: "Voc√™ posiciona sua irm√£ atr√°s de si, decidido a enfrentar o terror. Uma figura alta e disforme surge no p√© da escada ‚Äì bra√ßos longos demais, rosto disforme e vazio. Uma voz sussurra de todos os cantos: 'Mais um para a cole√ß√£o‚Ä¶'. Uma dor lancinante atravessa sua mente conforme a criatura se aproxima. **Sua sanidade desaba** no instante em que aquele horror inumano encosta em voc√™.",
                gameOver: true,
                title: "SANIDADE PERDIDA",
                ending: "Ao encarar diretamente o horror, sua mente n√£o resistiu. Voc√™ sucumbiu √† loucura e tornou-se mais uma v√≠tima eterna da Mans√£o Blackwood."
            },
            kitchen: {
                text: "Voc√™ entra na mans√£o pela cozinha. O local est√° imundo ‚Äì utens√≠lios enferrujados pelo ch√£o e m√≥veis quebrados. Sobre a mesa, h√° uma lanterna velha que ainda funciona; voc√™ a acende. H√° uma porta que leva a um corredor interno e outra para uma pequena despensa. De repente, um ru√≠do vem de dentro da despensa.",
                choices: [
                    { text: "Investigar a despensa", next: "pantry", sanityChange: -8 },
                    { text: "Seguir pelo corredor interno", next: "hallway", sanityChange: -5 },
                    { text: "Procurar por alguma arma", next: "weapons", sanityChange: -2 },
                    { text: "Voltar para fora", next: "backdoor", sanityChange: 3 }
                ]
            },
            **// Novas cenas adicionadas abaixo:**
            livingroom: {
                text: "Voc√™ adentra a sala de estar empoeirada. M√≥veis antigos, cobertos por len√ß√≥is manchados, d√£o ao lugar um ar fantasmag√≥rico. Um grande retrato da fam√≠lia Blackwood olha para voc√™ de cima da lareira apagada. O ar parado cheira a mofo, e voc√™ tem a estranha sensa√ß√£o de estar sendo observado por algo nas sombras.",
                choices: [
                    { text: "Revistar a sala em busca de algo √∫til", next: "livingroom_search", sanityChange: -5 },
                    { text: "Voltar para o hall de entrada", next: "entrance", sanityChange: 0 }
                ]
            },
            livingroom_search: {
                text: "Voc√™ examina cada canto da sala. Ao puxar um len√ßol de cima de um poltrona, um **corvo morto** cai no ch√£o, levantando poeira e fazendo voc√™ pular para tr√°s. Tremendo, voc√™ nota algo atr√°s de um quadro torto na parede: h√° uma frase rabiscada na parede descascada ‚Äì 'ELE ESCUTA DO POR√ÉO'. Engolindo em seco, voc√™ percebe que √© um aviso desesperado.",
                choices: [
                    { text: "Sair imediatamente e voltar ao hall", next: "entrance", sanityChange: 0 }
                ]
            },
            corridor: {
                text: "Voc√™ segue pelo corredor estreito e escuro. As t√°buas do assoalho gemem sob seus passos. Retratos antigos alinham as paredes, e seus olhos pintados parecem vigiar voc√™. H√° uma porta pesada, aparentemente trancada, no fim do corredor. √Ä esquerda, uma porta entreaberta exala um cheiro de podrid√£o ‚Äì deve ser a cozinha. √Ä direita, v√™-se a luz t√™nue do hall de entrada filtrando-se por uma arcada.",
                choices: [
                    { text: "Entrar na cozinha pela porta √† esquerda", next: "kitchen", sanityChange: -2 },
                    { text: "Seguir para o hall de entrada", next: "entrance", sanityChange: 0 }
                ]
            },
            bedroom: {
                text: "Voc√™ entra em um quarto antigo. A cama de dossel tem cortinas pu√≠das e o colch√£o afundado. H√° um arm√°rio antigo num canto e um espelho manchado ao lado da janela. A luz da lua mal ilumina o local atrav√©s das cortinas esfarrapadas. O sil√™ncio √© sepulcral, como se ningu√©m pisasse aqui h√° d√©cadas.",
                choices: [
                    { text: "Vasculhar o quarto em busca de pistas", next: "bedroom_search", sanityChange: -5 },
                    { text: "Voltar para o corredor", next: "stairs", sanityChange: 0 }
                ]
            },
            bedroom_search: {
                text: "Voc√™ revira o quarto. Dentro do arm√°rio, ao abrir, um **esqueleto** em trapos cai sobre voc√™! Voc√™ grita e se afasta, sentindo o cora√ß√£o disparar. No interior da porta do arm√°rio agora escancarada, h√° profundos arranh√µes na madeira... e uma palavra marcada entre eles: '**POR√ÉO**'. Alguma v√≠tima infeliz tentou alertar quem quer que encontrasse este quarto.",
                choices: [
                    { text: "Correr de volta para o corredor", next: "stairs", sanityChange: -5 }
                ]
            },
            shadow: {
                text: "Voc√™ avan√ßa em dire√ß√£o √† sombra. Ela se contorce e se retrai ao notar sua aproxima√ß√£o. De repente, **uma figura espectral** surge da escurid√£o ‚Äì alta, com olhos brilhantes de √≥dio. Sem emitir som, ela investe contra voc√™. Um frio mortal atravessa seu corpo enquanto o espectro passa atrav√©s de seu peito e desaparece! Voc√™ sente sua sanidade vacilar diante de tamanho horror.",
                choices: [
                    { text: "Recuperar o f√¥lego e voltar pelo corredor", next: "stairs", sanityChange: 0 }
                ]
            },
            hide: {
                text: "Voc√™ se lan√ßa atr√°s de um velho arm√°rio coberto por um len√ßol, prendendo a respira√ß√£o. Pela fresta, assiste aterrorizado **√† criatura disforme entrando no por√£o**. Ela fareja o ar e emite um rosnado baixo. Nos bra√ßos longos, carrega algo ‚Äì **o corpo inerte da sua irm√£**! Seu cora√ß√£o quase para. A criatura ent√£o se volta e, sem not√°-lo, sobe as escadas arrastando sua irm√£ para os andares superiores. Quando o sil√™ncio retorna, voc√™ sai do esconderijo, tr√™mulo e desesperado: a criatura levou sua irm√£ para cima!",
                choices: [
                    { text: "Seguir a criatura mantendo dist√¢ncia", next: "stairs", sanityChange: -10 },
                    { text: "Fugir de volta para a cozinha", next: "kitchen", sanityChange: -5 }
                ]
            },
            hide_together: {
                text: "Voc√™ puxa sua irm√£ para tr√°s de um grande arm√°rio, tapando a boca dela com a m√£o para abafar qualquer som. A criatura desce pesadamente os degraus. Por uma fresta, voc√™ a v√™ ‚Äì uma coisa esguia de membros alongados inspeciona o por√£o, rosnando frustrada. Voc√™s mal respiram. Ap√≥s alguns momentos angustiantes, o monstro sobe de volta, retornando para a escurid√£o do andar superior. Sua irm√£ sussurra, tr√™mula: 'Ele se foi... Vamos agora, antes que volte.'",
                choices: [
                    { text: "Escapar do por√£o com sua irm√£", next: "escape", sanityChange: 10 }
                ]
            },
            ask_who: {
                text: "Sua curiosidade fala mais alto. 'Quem √© ele?', voc√™ pergunta, hesitante. Sua irm√£ empalidece ainda mais. 'Ele... n√£o √© humano...', come√ßa a responder ‚Äì mas j√° √© tarde. **Um bra√ßo cadav√©rico** surge atr√°s de voc√™ e agarra seu ombro. Em um lampejo de horror, a criatura estava perto, escutando tudo. Voc√™ sente garras se cravarem enquanto √© puxado para tr√°s. Seu grito se perde na escurid√£o.",
                gameOver: true,
                title: "CURIOSIDADE FATAL",
                ending: "Ao hesitar para buscar respostas, voc√™ deu tempo ao mal que espreitava. A criatura atacou de surpresa, silenciando voc√™ e sua irm√£ para sempre. Nenhum de voc√™s escapou da escurid√£o da Mans√£o Blackwood."
            },
            ask_sister: {
                text: "Voc√™ re√∫ne coragem e questiona: 'Voc√™ viu minha irm√£? Onde ela est√°?'. A pequena figura sem rosto inclina a cabe√ßa, emitindo um sussurro m√∫ltiplo: '**Ela est√° com ELE... l√° embaixo...**'. Um vento g√©lido atravessa o quarto, fazendo os brinquedos nas prateleiras tremerem. Num piscar de olhos, a crian√ßa fantasma desaparece, deixando voc√™ sozinho no sil√™ncio sepulcral ‚Äì e com a terr√≠vel certeza de que precisa encontrar o por√£o.",
                choices: [
                    { text: "Sair correndo de volta ao corredor", next: "stairs", sanityChange: -5 }
                ]
            },
            help_creature: {
                text: "Voc√™ d√° um passo √† frente, com compaix√£o, estendendo a m√£o para a crian√ßa sem rosto. 'Voc√™ est√° bem?...' Antes que termine a frase, ela solta um guincho inumano. Bra√ßos surpreendentemente fortes agarram voc√™. O rosto liso se deforma revelando uma bocarra sombria. Voc√™ mal tem tempo de gritar enquanto aquela coisa se lan√ßa sobre voc√™, envolvendo-o em um abra√ßo mortal.",
                gameOver: true,
                title: "TRAGADO PELAS TREVAS",
                ending: "Sua tentativa de ajudar saiu horrivelmente errada. A criatura revelou sua verdadeira forma monstruosa e consumiu sua vida e sanidade. Quando a poeira baixa, voc√™ se tornou apenas mais um brinquedo silencioso naquele quarto maldito."
            },
            book: {
                text: "Voc√™ se ajoelha diante do livro aberto. √â um di√°rio antigo, com p√°ginas amareladas e texto em tinta marrom desbotada. Um trecho salta aos olhos: _\"...ele prometeu traz√™-la de volta. Apenas devo fornecer as ofertas adequadas. **O por√£o**... a chave de tudo est√° no por√£o...\"_ Seu cora√ß√£o acelera ao ler isso. A caligrafia termina abruptamente em um rabisco ileg√≠vel, como se o escritor tivesse sido interrompido no meio de algo terr√≠vel.",
                choices: [
                    { text: "Examinar as estantes de livros ao redor", next: "bookshelves", sanityChange: -3 },
                    { text: "Procurar a porta de sa√≠da da biblioteca", next: "library_exit", sanityChange: -2 },
                    { text: "Sair pela janela por onde entrou", next: "start", sanityChange: 5 }
                ]
            },
            bookshelves: {
                text: "Voc√™ percorre os dedos pelas lombadas dos livros empoeirados. Os t√≠tulos tratam de ocultismo, necromancia e rituais proibidos. Enquanto examina, um livro cai sozinho da prateleira com um estrondo, fazendo-o saltar. Sussurros parecem ecoar entre as estantes, mas podem ser apenas sua imagina√ß√£o. Embora n√£o encontre nada diretamente sobre sua irm√£, o ambiente opressor corr√≥i um pouco sua sanidade.",
                choices: [
                    { text: "Ler o di√°rio aberto no ch√£o", next: "book", sanityChange: -4 },
                    { text: "Tentar sair da biblioteca pela porta", next: "library_exit", sanityChange: -2 },
                    { text: "Desistir e sair pela janela", next: "start", sanityChange: 3 }
                ]
            },
            library_exit: {
                text: "Tateando as paredes da biblioteca atr√°s de uma sa√≠da, voc√™ descobre uma porta oculta entre as estantes. Ela cede com dificuldade, rangendo alto. Do outro lado h√° um corredor mal iluminado ‚Äì voc√™ reconhece que √© uma parte do interior da mans√£o. Agora n√£o est√° mais isolado na biblioteca; est√° de volta aos corredores sinistros da casa.",
                choices: [
                    { text: "Avan√ßar por esse corredor", next: "corridor", sanityChange: -2 }
                ]
            },
            pantry: {
                text: "Voc√™ abre a porta mofada da despensa. O fedor de comida podre faz voc√™ levar a m√£o ao rosto. Entre prateleiras ca√≠das e restos de mantimentos estragados, tudo parece calmo. De repente, algo se mexe ‚Äì um **rato enorme** dispara de um canto escuro direto para os seus p√©s e some pela cozinha. Voc√™ engole o grito; era apenas um animal, mas o susto custou alguns batimentos do seu cora√ß√£o.",
                choices: [
                    { text: "Voltar para a cozinha", next: "kitchen", sanityChange: 0 }
                ]
            },
            hallway: {
                text: "Voc√™ deixa a cozinha para tr√°s, entrando em um corredor interno estreito. As paredes manchadas de umidade e a pouca luz tornam o avan√ßo tenso. Cada passo ecoa. Ao longe, voc√™ percebe que esse corredor conecta com outra parte da casa ‚Äì possivelmente o sagu√£o de entrada ou algum corredor principal.",
                choices: [
                    { text: "Continuar pelo corredor adiante", next: "corridor", sanityChange: -3 }
                ]
            },
            weapons: {
                text: "Voc√™ revira gavetas e arm√°rios da cozinha procurando algo para se defender. Em meio a trastes enferrujados, um objeto √∫til reluz: uma **faca de cozinha** grande. A l√¢mina est√° cega e com pontos de ferrugem, mas √© melhor do que nada. Voc√™ a segura com firmeza. Sentir o peso da faca traz um fiapo de coragem em meio ao terror que o cerca.",
                choices: [
                    { text: "Voltar a explorar a cozinha", next: "kitchen", sanityChange: 1 }
                ]
            },
            kitchen_clues: {
                text: "Voc√™ inspeciona a cozinha em busca de sinais da sua irm√£. Logo nota marcas perturbadoras: **manchas de sangue** e arranh√µes no ch√£o perto da escada do por√£o, como se algu√©m tivesse sido arrastado para baixo contra a vontade. Seu est√¥mago revira com a ideia, mas pelo menos agora voc√™ tem certeza ‚Äì sua irm√£ **deve estar no por√£o** desta casa.",
                choices: [
                    { text: "Descer com cuidado para o por√£o", next: "basement", sanityChange: -12 },
                    { text: "Entrar na mans√£o pela cozinha", next: "kitchen", sanityChange: -2 },
                    { text: "Recuar e voltar para fora dos fundos", next: "backdoor", sanityChange: 0 }
                ]
            }
        }; // Fim do objeto scenes
        // Fun√ß√£o para atualizar a barra de sanidade
        function updateSanity(change) {
            gameState.sanity += change;
            if (gameState.sanity > 100) gameState.sanity = 100;
            if (gameState.sanity < 0) gameState.sanity = 0;
            // Atualiza barra e texto
            sanityFill.style.width = gameState.sanity + "%";
            sanityValue.textContent = gameState.sanity + "%";
            let status = "";
            if (gameState.sanity >= 80) status = "Est√°vel";
            else if (gameState.sanity >= 60) status = "Levemente Abalada";
            else if (gameState.sanity >= 40) status = "Abalada";
            else if (gameState.sanity >= 20) status = "Cr√≠tica";
            else status = "√Ä Beira da Loucura";
            sanityText.textContent = status;
            // Som de batimento se sanidade muito baixa
            if (gameState.sanity < 30 && gameState.soundEnabled) {
                sanityLowSound.play().catch(e => console.log("Erro no √°udio"));
            }
            // Verifica sanidade zerada (game over)
            if (gameState.sanity <= 0) {
                gameOver("Sua sanidade se esgotou completamente. A realidade desmorona ao seu redor e voc√™ perde o controle da mente, tornando-se mais uma alma perdida na mans√£o.", "SANIDADE ESGOTADA");
            }
        }
        // Fun√ß√£o para exibir uma cena
        function showScene(sceneId) {
            const scene = scenes[sceneId];
            if (!scene) {
                console.error(`Cena "${sceneId}" n√£o encontrada!`);
                return;
            }
            gameState.currentScene = sceneId;
            gameState.visitedScenes.add(sceneId);
            storyText.textContent = scene.text;
            choicesContainer.innerHTML = "";
            if (scene.gameOver) {
                gameOver(scene.ending, scene.title);
                return;
            }
            // Adiciona bot√µes de escolha
            scene.choices.forEach(choice => {
                const btn = document.createElement("button");
                btn.className = "choice-btn";
                btn.textContent = choice.text;
                // Opacidade diferente se cena j√° visitada
                if (gameState.visitedScenes.has(choice.next)) {
                    btn.style.opacity = "0.8";
                    btn.style.borderStyle = "dashed";
                }
                btn.addEventListener('click', () => {
                    if (gameState.soundEnabled) {
                        clickSound.currentTime = 0;
                        clickSound.play().catch(e => console.log("Erro no √°udio"));
                    }
                    updateSanity(choice.sanityChange);
                    setTimeout(() => showScene(choice.next), 300);
                });
                choicesContainer.appendChild(btn);
            });
        }
        // Fun√ß√£o de fim de jogo
        function gameOver(message, title) {
            gameOverTitle.textContent = title;
            gameOverText.textContent = message;
            gameOverScreen.style.display = "flex";
            if (gameState.soundEnabled) {
                gameOverSound.play().catch(e => console.log("Erro no √°udio"));
                bgSound.pause();
            }
        }
        // Reiniciar jogo
        restartBtn.addEventListener('click', () => {
            gameState = {
                sanity: 100,
                currentScene: "start",
                soundEnabled: gameState.soundEnabled,
                visitedScenes: new Set(["start"])
            };
            sanityFill.style.width = "100%";
            sanityValue.textContent = "100%";
            sanityText.textContent = "Est√°vel";
            gameOverScreen.style.display = "none";
            if (gameState.soundEnabled) {
                bgSound.currentTime = 0;
                bgSound.play().catch(e => console.log("Autoplay bloqueado"));
            }
            showScene("start");
        });
        // Iniciar o jogo na cena inicial
        showScene("start");
        // Iniciar efeitos sonoros de passos
        updateFootsteps();
    </script>
</body>
</html>
