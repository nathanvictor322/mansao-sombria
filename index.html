<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A Mansão Abandonada - Jogo de Terror</title>
    <style>
        /* Reset e estilos gerais */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #0a0a0a;
            color: #e0e0e0;
            line-height: 1.6;
            overflow-y: auto;
            min-height: 100vh;
            padding: 10px;
            background-image: radial-gradient(#1a1a1a 1px, transparent 1px);
            background-size: 20px 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background-color: #111111;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.7);
            border: 1px solid #333;
            min-height: 95vh;
            overflow-y: auto;
            position: relative;
        }

        /* Cabeçalho do jogo */
        .header {
            text-align: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 1px solid #333;
            position: relative;
        }

        .header h1 {
            color: #8b0000;
            font-size: 2.2rem;
            text-shadow: 0 0 10px rgba(139, 0, 0, 0.5);
            margin-bottom: 8px;
            letter-spacing: 1px;
        }

        .header .subtitle {
            color: #aaa;
            font-style: italic;
        }

        /* Indicador de sanidade */
        .sanity-container {
            margin-bottom: 20px;
            background-color: #1a1a1a;
            padding: 15px;
            border-radius: 5px;
            border: 1px solid #333;
        }

        .sanity-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.9rem;
            color: #aaa;
        }

        .sanity-bar {
            height: 20px;
            background-color: #222;
            border-radius: 10px;
            overflow: hidden;
            position: relative;
            border: 1px solid #444;
        }

        .sanity-fill {
            height: 100%;
            width: 100%;
            background: linear-gradient(90deg, #0a5, #5f5, #0a5);
            border-radius: 10px;
            transition: width 0.5s ease;
        }

        .sanity-low {
            background: linear-gradient(90deg, #a00, #f55, #a00);
        }

        /* Área da cena */
        .scene-container {
            margin-bottom: 25px;
            background-color: #151515;
            padding: 20px;
            border-radius: 5px;
            border: 1px solid #333;
            min-height: 200px;
            position: relative;
        }

        .scene-text {
            font-size: 1.2rem;
            line-height: 1.7;
            color: #ddd;
            white-space: pre-line;
            margin-bottom: 20px;
        }

        .scene-text::first-letter {
            font-size: 1.5em;
            color: #8b0000;
        }

        /* Opções de escolha */
        .options-container {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-top: 20px;
        }

        .option-button {
            background-color: #222;
            color: #e0e0e0;
            border: 1px solid #444;
            border-radius: 5px;
            padding: 15px;
            font-size: 1.1rem;
            cursor: pointer;
            text-align: left;
            transition: all 0.2s;
            position: relative;
            overflow: hidden;
        }

        .option-button:hover, .option-button:focus {
            background-color: #2a2a2a;
            border-color: #8b0000;
            transform: translateY(-2px);
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.3);
        }

        .option-button:active {
            transform: translateY(0);
        }

        .option-button::before {
            content: ">";
            position: absolute;
            left: 10px;
            color: #8b0000;
            font-weight: bold;
        }

        .option-button span {
            margin-left: 20px;
            display: block;
        }

        /* Tela de game over */
        .game-over {
            text-align: center;
            padding: 30px;
            background-color: #0f0f0f;
            border-radius: 5px;
            border: 2px solid #8b0000;
        }

        .game-over h2 {
            color: #8b0000;
            font-size: 2.5rem;
            margin-bottom: 20px;
            text-shadow: 0 0 10px rgba(139, 0, 0, 0.7);
        }

        .game-over p {
            font-size: 1.3rem;
            margin-bottom: 30px;
            color: #ccc;
        }

        .restart-button {
            background-color: #8b0000;
            color: white;
            border: none;
            border-radius: 5px;
            padding: 15px 30px;
            font-size: 1.2rem;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
            letter-spacing: 1px;
        }

        .restart-button:hover {
            background-color: #a00;
            transform: scale(1.05);
            box-shadow: 0 0 15px rgba(139, 0, 0, 0.7);
        }

        /* Efeitos visuais */
        .flicker {
            animation: flicker 0.3s infinite alternate;
        }

        @keyframes flicker {
            from { opacity: 0.8; }
            to { opacity: 1; }
        }

        .hidden {
            display: none;
        }

        /* Responsividade */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
                min-height: 90vh;
            }
            
            .header h1 {
                font-size: 1.8rem;
            }
            
            .scene-text {
                font-size: 1.1rem;
            }
            
            .option-button {
                padding: 12px;
                font-size: 1rem;
            }
            
            .sanity-container {
                padding: 10px;
            }
        }

        @media (max-width: 480px) {
            body {
                padding: 5px;
            }
            
            .container {
                padding: 10px;
            }
            
            .header h1 {
                font-size: 1.5rem;
            }
            
            .scene-text {
                font-size: 1rem;
            }
            
            .option-button {
                padding: 10px;
            }
        }

        /* Efeito de digitação para o texto da cena */
        .typing {
            overflow: hidden;
            border-right: 2px solid #8b0000;
            white-space: pre-line;
            animation: typing 3.5s steps(40, end), blink-caret 0.75s step-end infinite;
        }

        @keyframes typing {
            from { width: 0 }
            to { width: 100% }
        }

        @keyframes blink-caret {
            from, to { border-color: transparent }
            50% { border-color: #8b0000 }
        }

        /* Estilo para situações de perigo */
        .danger {
            border-color: #ff0000;
            box-shadow: 0 0 15px rgba(255, 0, 0, 0.3);
        }

        .danger-text {
            color: #ff6666;
        }

        .escape-option {
            background-color: #330000;
            border-color: #ff0000;
        }

        .escape-option:hover {
            background-color: #550000;
        }
    </style>
</head>
<body>
    <div class="container" id="game-container">
        <div class="header">
            <h1>A MANSÃO ABANDONADA</h1>
            <p class="subtitle">Um jogo de terror psicológico</p>
        </div>
        
        <div class="sanity-container">
            <div class="sanity-label">
                <span>SANIDADE MENTAL</span>
                <span id="sanity-value">100%</span>
            </div>
            <div class="sanity-bar">
                <div class="sanity-fill" id="sanity-fill"></div>
            </div>
        </div>
        
        <div class="scene-container" id="scene-container">
            <div class="scene-text" id="scene-text">
                Carregando...
            </div>
            <div class="options-container" id="options-container">
                <!-- Opções serão inseridas aqui pelo JavaScript -->
            </div>
        </div>
    </div>

    <script>
        // Estado do jogo
        let sanity = 100;
        let gameState = {};
        let previousScene = null; // Para armazenar a cena anterior
        
        // Cenas do jogo
        const scenes = {
            start: {
                text: `Há três semanas, minha irmã Clara desapareceu. A última pista que a polícia encontrou foi um diário em seu quarto, com anotações sobre uma mansão abandonada nas colinas. Eles abandonaram o caso por falta de evidências, mas eu não posso fazer o mesmo.

Esta noite, estou aqui, diante do portão enferrujado da Mansão Blackwood. O ar está frio e pesado, e uma névoa fina envolve a propriedade. Se Clara veio até aqui, preciso descobrir o que aconteceu.

Minha lanterna ilumina apenas alguns metros à frente. O portão range quando o empurro. É agora ou nunca.`,
                options: [
                    { text: "Entrar pela porta da frente", next: "entrada", sanityChange: -5 },
                    { text: "Contornar a mansão e procurar uma entrada dos fundos", next: "fundos", sanityChange: -3 },
                    { text: "Investigar o jardim primeiro", next: "jardim", sanityChange: -2 }
                ]
            },
            
            entrada: {
                text: `A porta principal está emperrada, mas cede com um empurrão. O interior é ainda mais escuro que o exterior. O cheiro de mofo e madeira podre invade minhas narinas.

No hall de entrada, uma escada majestosa se ergue à minha frente, mas muitos degraus estão quebrados. À esquerda, uma porta entreaberta revela o que parece ser uma biblioteca. À direita, um corredor escuro leva mais fundo na mansão.

Ouço um rangido vindo de cima, como se alguém tivesse pisado em uma tábua solta.`,
                options: [
                    { text: "Subir a escada", next: "escada", condition: () => sanity > 30, sanityChange: -10 },
                    { text: "Entrar na biblioteca", next: "biblioteca", sanityChange: -5 },
                    { text: "Seguir pelo corredor escuro", next: "corredor", sanityChange: -8 },
                    { text: "Voltar para fora e tentar outra entrada", next: "fundos", sanityChange: -2 }
                ]
            },
            
            fundos: {
                text: `Contorno a mansão, pisando em folhas secas e galhos quebrados. As janelas estão todas escuras, exceto uma no andar superior, onde uma luz fraca parece tremular.

Na parte de trás, encontro uma porta de serviço meio arrombada. Dentro, vejo uma cozinha em ruínas. Um cheiro estranho, como de carne estragada, paira no ar.

No balcão, vejo algo que faz meu coração acelerar: um pingente de prata igual ao que dei para Clara em seu aniversário.`,
                options: [
                    { text: "Entrar pela cozinha", next: "cozinha", sanityChange: -7 },
                    { text: "Olhar pela janela com luz", next: "janela", condition: () => sanity > 40, sanityChange: -12 },
                    { text: "Voltar para a frente da mansão", next: "entrada", sanityChange: -3 },
                    { text: "Gritar o nome de Clara", next: "gritar", sanityChange: -15 }
                ]
            },
            
            jardim: {
                text: `O jardim está abandonado há décadas. Estatuas quebradas e árvores retorcidas criam sombras ameaçadoras. Minha lanterna revela algo perturbador: marcas de arrasto no chão lamacento, que levam até uma pequena construção nos fundos do jardim.

De repente, ouço um sussurro vindo dos arbustos. Não consigo distinguir palavras, mas a voz parece familiar.

Uma lápide inclinada chama minha atenção. A inscrição está desgastada, mas consigo ler "Aqueles que buscam respostas...". O resto está ilegível.`,
                options: [
                    { text: "Seguir as marcas de arrasto", next: "construcao", sanityChange: -10 },
                    { text: "Investigar os sussurros nos arbustos", next: "arbustos", sanityChange: -12 },
                    { text: "Examinar a lápide mais de perto", next: "lapide", condition: () => sanity > 50, sanityChange: -15 },
                    { text: "Voltar para a entrada da mansão", next: "entrada", sanityChange: -2 }
                ]
            },
            
            biblioteca: {
                text: `A biblioteca é uma sala enorme, com estantes que vão do chão ao teto. A maioria dos livros está apodrecendo, mas alguns parecem intactos. Em uma mesa no centro, um livro está aberto.

Ao me aproximar, vejo que são anotações escritas à mão. A caligrafia é de Clara! Ela escreve sobre "rituais antigos" e "entidades que habitam os limiares entre mundos".

De repente, a porta da biblioteca bate sozinha. Estou trancado aqui dentro.`,
                options: [
                    { text: "Ler mais do diário de Clara", next: "diario", sanityChange: -10 },
                    { text: "Procurar uma saída", next: "procura_saida", sanityChange: -8 },
                    { text: "Gritar por ajuda", next: "gritar_biblioteca", sanityChange: -12 },
                    { text: "Examinar as estantes em busca de algo útil", next: "estantes", condition: () => sanity > 35, sanityChange: -7 }
                ]
            },
            
            cozinha: {
                text: `A cozinha é um caos. Pratos quebrados cobrem o chão, e os armários estão vazios, exceto por alguns vidros com conteúdo indeterminado. O cheiro de decomposição é mais forte aqui.

Encontro o pingente de Clara em cima da mesa. Está frio ao toque. Quando o pego, ouço passadas acima de mim, como se alguém estivesse andando rápido.

Então vejo algo pior: na parede, atrás de um armário deslocado, há marcas de arranhões. E palavras riscadas com algo escuro: "ELE VIVE NAS PAREDES".`,
                options: [
                    { text: "Sair correndo da cozinha", next: "corredor", sanityChange: -10 },
                    { text: "Investigar as marcas na parede", next: "marcas_parede", sanityChange: -15 },
                    { text: "Procurar onde vão os passos", next: "passos", sanityChange: -12 },
                    { text: "Procurar uma arma para se defender", next: "arma", condition: () => sanity > 25, sanityChange: -8 }
                ]
            },
            
            escada: {
                text: `Cada degrau range sob meus pés. A escuridão no andar superior é absoluta, engolindo a luz da minha lanterna. Quando chego ao topo, vejo um longo corredor com várias portas.

De repente, todas as portas se abrem ao mesmo tempo com um rangido ensurdecedor. Do quarto ao final do corredor, uma sombra se move. Não é humana - é muito alta, muito magra.

Ela se vira para mim, mas não tem rosto, apenas um vazio escuro. Minha mente grita para eu correr, mas minhas pernas não respondem.`,
                options: [
                    { text: "Correr de volta escada abaixo", next: "entrada", sanityChange: -20 },
                    { text: "Entrar no primeiro quarto à direita", next: "quarto1", sanityChange: -15 },
                    { text: "Enfrentar a sombra", next: "confronto_sombra", condition: () => sanity > 70, sanityChange: -30 },
                    { text: "Ficar parado e observar", next: "observar", sanityChange: -25 }
                ]
            },
            
            diario: {
                text: `Folheio as páginas do diário de Clara. Suas anotações ficam cada vez mais desesperadas:

"Ele me encontra nos sonhos. Diz que quer me mostrar a verdade por trás do véu."
"Hoje descobri o que aconteceu com os antigos moradores. Eles não se foram. Ainda estão aqui, presos entre as paredes."
"Encontrei o quarto do ritual. Se eu completar a cerimônia, posso trazê-los de volta. Ou talvez me juntar a eles."

A última entrada é de três semanas atrás, no dia em que ela desapareceu: "Esta noite vou enfrentar o que habita no sótão. Se não voltar, irmão, por favor não me procure. É tarde demais para mim."`,
                options: [
                    { text: "Procurar o sótão", next: "sotao", sanityChange: -20 },
                    { text: "Sair da biblioteca e voltar para casa", next: "desistir", sanityChange: -25 },
                    { text: "Continuar procurando por mais pistas", next: "estantes", sanityChange: -10 }
                ]
            },
            
            sotao: {
                text: `Encontro uma escada estreita que leva ao sótão. O ar aqui é pesado e gelado. No centro da sala, um círculo está desenhado no chão com um pó branco. Velas negras, já consumidas, formam um pentagrama.

No centro do círculo, está Clara. Ela está imóvel, sentada de costas para mim.

"Clara?" sussurro.

Ela se vira lentamente. Seus olhos são completamente pretos, e um sorriso largo se abre em seu rosto, muito largo para ser humano.

"Finalmente você vejo", diz uma voz que é a dela, mas ao mesmo tempo não é. "Agora podemos ficar juntos para sempre."`,
                options: [
                    { text: "Correr em direção a ela", next: "armadilha", sanityChange: -20 },
                    { text: "Recuar e tentar quebrar o círculo", next: "quebrar_circulo", condition: () => sanity > 30, sanityChange: -15 },
                    { text: "Gritar seu nome com força", next: "gritar_nome", sanityChange: -18 }
                ]
            },
            
            quebrar_circulo: {
                text: `Pulso para fora do círculo e começo a apagar as marcas no chão com meus pés. Clara (ou o que quer que ela tenha se tornado) grita - um som agudo e não humano.

As velas se acendem sozinhas com chamas verdes. A sala começa a tremer. Mas as marcas do círculo estão se desfazendo.

"Você não pode nos separar!", a coisa com o rosto de minha irmã grita. Mas já posso ver seu corpo tremendo, como se estivesse desfocado.

Com um último esforço, esmago a última vela. Um silêncio súbito cai sobre o sótão.`,
                options: [
                    { text: "Aproximar-se de Clara", next: "final1", sanityChange: 10 },
                    { text: "Sair correndo do sótão", next: "final2", sanityChange: -10 }
                ]
            },
            
            // CENAS MELHORADAS - Não terminam o jogo, mas levam a situações perigosas
            confronto_sombra: {
                text: `Decido enfrentar a sombra. Avanço em direção a ela, mas antes que possa alcançá-la, algo me agarra por trás. Mãos frias e ossudas me imobilizam enquanto a sombra sem rosto se aproxima.

O vazio escuro onde seu rosto deveria estar se expande para me engolir. Sinto meu corpo ficar frio, minha mente começando a se dissipar...

De repente, ouço um barulho vindo de baixo - um estrondo que faz a mansão toda tremer. As mãos que me seguravam soltam por um instante. É minha chance!`,
                options: [
                    { text: "Correr escada abaixo enquanto posso", next: "entrada", sanityChange: -25, escape: true },
                    { text: "Empurrar a sombra e entrar no quarto", next: "quarto_sombra", sanityChange: -30 }
                ]
            },
            
            armadilha: {
                text: `Corro em direção a Clara, querendo abraçá-la, trazê-la de volta. Mas quando toco nela, suas mãos se fecham em meus pulsos com força sobrenatural.

"Obrigada", sussurra a voz que não é dela. "Precisava de um corpo novo. O dela já estava... gasto."

Sinto minha consciência se esvaindo, enquanto algo frio e antigo tenta invadir minha mente. Em um último esforço de sobrevivência, meus instintos assumem o controle. Dou um solavanco para trás, rompendo o contato. A coisa que habita Clara parece surpresa.

"Você é mais forte do que pensei", ela sussurra, enquanto eu recuo em direção à escada.`,
                options: [
                    { text: "Descer a escada correndo", next: "entrada", sanityChange: -20, escape: true },
                    { text: "Tentar destruir o círculo ritualístico", next: "quebrar_circulo", sanityChange: -25 }
                ]
            },
            
            quarto_sombra: {
                text: `Consigo empurrar a sombra e entro no quarto, fechando a porta atrás de mim. O quarto está vazio, exceto por uma janela quebrada. Posso ouvir a sombra arranhando a porta do lado de fora.

A janela leva a um telhado inclinado. Lá fora, a névoa está mais densa. Vejo que posso descer pelo telhado até uma varanda no andar de baixo.

A porta começa a ceder. Não tenho muito tempo.`,
                options: [
                    { text: "Pular pela janela para o telhado", next: "telhado", sanityChange: -15 },
                    { text: "Procurar algo para barrar a porta", next: "barricar_porta", sanityChange: -10 }
                ]
            },
            
            telhado: {
                text: `Saio pela janela e me encontro no telhado escorregadio da mansão. A neblina é tão densa que mal consigo ver o chão. Deslizo cuidadosamente até a beirada e vejo uma varanda logo abaixo.

Consigo pular para a varanda com algum esforço. Estou agora no segundo andar, em um corredor diferente. A sombra ainda deve estar no outro lado da mansão.

Ouço vozes sussurrantes vindo de uma das portas.`,
                options: [
                    { text: "Seguir as vozes", next: "vozes_corredor", sanityChange: -12 },
                    { text: "Descer as escadas para o hall principal", next: "entrada", sanityChange: -5 }
                ]
            },
            
            desistir: {
                text: `Decido que já chega. Clara provavelmente já se foi, e não há sentido em me arriscar também. Começo a sair da biblioteca, mas algo estranho acontece.

As portas não abrem. As janelas estão seladas como se tivessem sido pintadas por dentro. Tento forçar uma janela, mas ela não se move.

Uma risada ecoa pela biblioteca. Não é humana. "Você achou que poderia simplesmente ir embora?", uma voz sussurra nas sombras. "Você já está preso aqui, como todos os outros."`,
                options: [
                    { text: "Procurar desesperadamente por uma saída", next: "procura_saida", sanityChange: -15 },
                    { text: "Enfrentar o que está na biblioteca", next: "enfrentar_biblioteca", sanityChange: -20 },
                    { text: "Tentar queimar algo para criar uma distração", next: "distracao_fogo", condition: () => sanity > 40, sanityChange: -25 }
                ]
            },
            
            // Cenas de final (verdadeiros finais)
            final1: {
                text: `Clara cai no chão, inconsciente. Seus olhos voltaram ao normal. Quando ela acorda, minutos depois, está confusa, mas é ela de verdade.

Conduzo minha irmã para fora da mansão, que agora parece menos ameaçadora, como se tivesse perdido sua força.

Nunca entendemos completamente o que aconteceu na Mansão Blackwood, mas Clara está viva e segura. Às vezes, ainda acordo no meio da noite, pensando ter ouvido sussurros vindos das paredes... mas pelo menos estamos juntos.`,
                options: [
                    { text: "Jogar novamente", next: "restart" }
                ]
            },
            
            final2: {
                text: `Corro escada abaixo, deixando Clara para trás. Quando saio da mansão, olho para trás uma última vez e vejo uma figura na janela do sótão, observando minha fuga.

Volto para casa sozinho. A polícia não acredita na minha história. Clara é declarada morta, mas eu sei a verdade: algo ainda a mantém presa naquela mansão.

Todas as noites sonho com ela, batendo nas paredes do sótão, tentando escapar. E sei que um dia vou ter que voltar.`,
                options: [
                    { text: "Jogar novamente", next: "restart" }
                ]
            },
            
            // CENAS NOVAS ADICIONADAS PARA COMPLETAR O JOGO
            gritar: {
                text: `Você grita o nome de Clara com toda a força que tem. Seu eco ressoa pelos corredores vazios, mas nenhuma resposta vem. Apenas o silêncio pesado da mansão.

De repente, você ouve algo se movendo no andar de cima. Passos rápidos, como se alguém estivesse correndo. Eles param diretamente acima de você, e então... silêncio novamente.

Sua voz parece ter atraído atenção.`,
                options: [
                    { text: "Investigar os passos no andar superior", next: "escada", sanityChange: -12 },
                    { text: "Voltar para a cozinha rapidamente", next: "cozinha", sanityChange: -8 },
                    { text: "Sair correndo da mansão", next: "jardim", sanityChange: -5 }
                ]
            },
            
            construcao: {
                text: `As marcas de arrasto levam até uma pequena construção de pedra, provavelmente uma antiga casa de jardineiro. A porta está semi-destruída, pendendo por uma única dobradiça enferrujada.

Dentro, o ar está ainda mais frio. Há ferramentas enferrujadas espalhadas pelo chão e uma mesa com manchas escuras que você prefere não identificar.

No canto mais escuro, uma escada de madeira apodrecida desce para um porão escuro. Um cheiro doce e nauseante emana de baixo.`,
                options: [
                    { text: "Descer pela escada até o porão", next: "porao", sanityChange: -15 },
                    { text: "Procurar por pistas na construção", next: "construcao_pistas", sanityChange: -10 },
                    { text: "Voltar para o jardim", next: "jardim", sanityChange: -5 }
                ]
            },
            
            construcao_pistas: {
                text: `Você revira a pequena construção. Em um canto, encontra um caderno encharcado. A maioria das páginas está ilegível, mas você consegue ler alguns fragmentos:

"O Mestre não gosta quando olhamos para ele diretamente..."
"Clara veio aqui ontem. Ela está determinada a enfrentá-lo."
"Os sussurros nas paredes estão ficando mais altos."

De repente, a porta bate sozinha, trancando você dentro.`,
                options: [
                    { text: "Tentar forçar a porta", next: "construcao", sanityChange: -8 },
                    { text: "Descer para o porão - é a única saída", next: "porao", sanityChange: -12 }
                ]
            },
            
            porao: {
                text: `A escada range perigosamente sob seu peso, mas você consegue descer. O porão é úmido e escuro, com raízes penetrando pelas paredes de pedra.

No centro, há um círculo desenhado no chão com giz branco. Velas pretas, já consumidas, formam um padrão estranho ao redor. Em um canto, você vê roupas rasgadas - reconhece o casaco de Clara.

Uma voz sussurra em seu ouvido: "Ela não quer ser encontrada..."`,
                options: [
                    { text: "Investigar o círculo ritualístico", next: "ritual_porao", sanityChange: -18 },
                    { text: "Pegar o casaco de Clara e sair correndo", next: "jardim", sanityChange: -12 },
                    { text: "Procurar por mais pistas no porão", next: "porao_pistas", sanityChange: -15 }
                ]
            },
            
            arbustos: {
                text: `Você se aproxima cautelosamente dos arbustos. Os sussurros ficam mais claros, mas ainda são indistintos - como se várias pessoas falassem ao mesmo tempo em um idioma antigo.

Ao afastar os galhos, encontra algo inesperado: um buraco no chão, com degraus de pedra que descem para a escuridão. O ar que sobe é quente e cheira a enxofre.

Os sussurros parecem vir de lá embaixo, convidativos e ameaçadores ao mesmo tempo.`,
                options: [
                    { text: "Descer pelos degraus de pedra", next: "tuneis", sanityChange: -20 },
                    { text: "Recuar e voltar para o jardim", next: "jardim", sanityChange: -10 },
                    { text: "Jogar uma pedra para testar a profundidade", next: "teste_buraco", sanityChange: -8 }
                ]
            },
            
            tuneis: {
                text: `Os degraus levam a um sistema de túneis úmidos e baixos. As paredes estão cobertas por símbolos estranhos, pintados com algo que brilha fracamente no escuro.

Você segue os túneis por algum tempo até chegar a uma bifurcação. À esquerda, ouve-se o som de água gotejando. À direita, os sussurros são mais claros, quase como uma canção.

No chão, você vê pegadas frescas na lama. São pequenas, como as de Clara.`,
                options: [
                    { text: "Seguir pelo túnel da esquerda (água)", next: "tunel_agua", sanityChange: -12 },
                    { text: "Seguir pelo túnel da direita (sussurros)", next: "tunel_sussurros", sanityChange: -18 },
                    { text: "Voltar para o jardim", next: "jardim", sanityChange: -10 }
                ]
            },
            
            lapide: {
                text: `Você se ajoelha para examinar a lápide mais de perto. A inscrição completa diz:

"AQUELES QUE BUSCAM RESPOSTAS
DEVEM ESTAR PREPARADOS
PARA PERDER AS PERGUNTAS
E A SI MESMOS
- M.B. 1843"

Ao tocar na lápide, ela cede levemente. É uma pedra falsa! Por baixo, há uma pequena cavidade contendo um diário embrulhado em couro.

As páginas estão cheias de anotações sobre a família Blackwood e os rituais que praticavam.`,
                options: [
                    { text: "Ler o diário das sombras", next: "diario_sombras", sanityChange: -15 },
                    { text: "Deixar o diário e voltar ao jardim", next: "jardim", sanityChange: -8 },
                    { text: "Levar o diário consigo para investigar depois", next: "jardim", sanityChange: -5 }
                ]
            },
            
            procura_saida: {
                text: `A porta da biblioteca está trancada, mas você não desiste. Examina as paredes em busca de outra saída. Em uma das estantes, nota algo estranho: um livro parece estar permanentemente preso à prateleira.

Ao puxá-lo, ouve um clique mecânico. A estante inteira gira lentamente, revelando uma passagem secreta.

Dentro, um corredor estreito e empoeirado se estende para a escuridão. O ar aqui é ainda mais velho e mofado.`,
                options: [
                    { text: "Entrar na passagem secreta", next: "passagem_secreta", sanityChange: -12 },
                    { text: "Ficar na biblioteca e tentar outra coisa", next: "biblioteca", sanityChange: -5 },
                    { text: "Procurar por algo para forçar a porta", next: "biblioteca", sanityChange: -3 }
                ]
            },
            
            passagem_secreta: {
                text: `A passagem secreta é baixa e estreita, forçando você a caminhar agachado. Após alguns metros, ela se abre em uma pequena sala oculta.

A sala contém uma mesa coberta por frascos de vidro com líquidos turvos, páginas manuscritas e instrumentos estranhos. Em uma parede, desenhos complexos mostram figuras humanas em posições de sofrimento.

Em um canto, você encontra uma pequena gaiola de ferro. Dentro dela, um pássaro empalhado observa você com olhos de vidro que parecem seguir seus movimentos.`,
                options: [
                    { text: "Examinar os desenhos na parede", next: "desenhos_parede", sanityChange: -15 },
                    { text: "Procurar por uma saída da sala", next: "saida_sala_secreta", sanityChange: -10 },
                    { text: "Voltar para a biblioteca", next: "biblioteca", sanityChange: -8 }
                ]
            },
            
            gritar_biblioteca: {
                text: `Você grita por ajuda, mas sua voz é engolida pela escuridão da biblioteca. Em vez de uma resposta, algo responde: das paredes, centenas de sussurros começam a ecoar, sobrepondo-se uns aos outros até formarem uma cacofonia ensurdecedora.

Os livros nas estantes começam a vibrar. Um deles cai no chão, abrindo-se em uma página específica. As palavras parecem brilhar fracamente.

Os sussurros param subitamente, deixando um silêncio ainda mais perturbador.`,
                options: [
                    { text: "Aproximar-se do livro que caiu", next: "livro_caido", sanityChange: -12 },
                    { text: "Cobrir os ouvidos e tentar sair correndo", next: "biblioteca", sanityChange: -15 },
                    { text: "Gritar novamente, desafiadoramente", next: "desafio_biblioteca", sanityChange: -20 }
                ]
            },
            
            estantes: {
                text: `Você examina cuidadosamente as estantes. Entre os livros empoeirados, encontra alguns volumes que parecem ter sido consultados recentemente.

Um deles é um tratado sobre entidades dimensionais, com anotações nas margens na caligrafia de Clara. Ela sublinhou uma passagem: "Aqueles que invocam o que vive entre os mundos raramente sobrevivem para contar a experiência."

Em outra estante, você encontra uma pequena chave de ferro presa a uma etiqueta que diz "Sótão".`,
                options: [
                    { text: "Levar a chave do sótão", next: "chave_sotao", sanityChange: -8 },
                    { text: "Continuar lendo o tratado", next: "tratado_entidades", sanityChange: -12 },
                    { text: "Voltar a examinar o diário de Clara", next: "diario", sanityChange: -5 }
                ]
            },
            
            marcas_parede: {
                text: `Você se aproxima das marcas na parede. De perto, pode ver que foram feitas com unhas humanas. As palavras "ELE VIVE NAS PAREDES" são repetidas dezenas de vezes, em tamanhos e orientações diferentes, como se tivessem sido escritas por várias pessoas em estados de pânico.

Ao tocar uma das marcas, a parede parece pulsar levemente sob seus dedos, como se fosse orgânica.

De repente, você ouve um arranhão vindo DE DENTRO da parede, logo atrás das palavras. Alguém - ou algo - está do outro lado.`,
                options: [
                    { text: "Bater na parede", next: "bater_parede", sanityChange: -15 },
                    { text: "Recuar rapidamente", next: "cozinha", sanityChange: -12 },
                    { text: "Sussurrar 'Clara?' para a parede", next: "sussurro_parede", sanityChange: -18 }
                ]
            },
            
            passos: {
                text: `Você segue os passos, que parecem vir do andar superior. Subindo as escadas com cuidado, você chega a um corredor escuro.

Os passos param subitamente. Você fica parado, ouvindo, até que um rangido vem de uma porta entreaberta no final do corredor. A porta se move levemente, como se alguém a tivesse empurrado por dentro.

Do fundo do corredor, uma voz fraca sussurra: "Por que você veio?"`,
                options: [
                    { text: "Responder: 'Estou procurando minha irmã'", next: "dialogo_corredor", sanityChange: -12 },
                    { text: "Avançar em direção à porta", next: "porta_misteriosa", sanityChange: -15 },
                    { text: "Recuar e descer as escadas", next: "cozinha", sanityChange: -8 }
                ]
            },
            
            arma: {
                text: `Você revira a cozinha em busca de algo que possa usar como arma. Em uma gaveta emperrada, encontra uma faca de açougueiro enferrujada. O cabo está pegajoso, e a lâmina tem manchas escuras que não parecem ser apenas ferrugem.

Ao pegar a faca, você ouve um sussurro: "Sim... use-me... derrame o sangue..."

A faca parece vibrar levemente em sua mão, como se tivesse vida própria.`,
                options: [
                    { text: "Manter a faca consigo", next: "cozinha", sanityChange: -10 },
                    { text: "Jogar a faca fora, assustado", next: "cozinha", sanityChange: -12 },
                    { text: "Examinar as manchas na lâmina", next: "examinar_faca", sanityChange: -15 }
                ]
            },
            
            quarto1: {
                text: `Você entra no primeiro quarto à direita. É um quarto de criança, preservado como se o tempo tivesse parado aqui. Brinquedos antigos estão arrumados nas prateleiras, e uma boneca de porcelana está sentada em uma cadeira de balanço.

A boneca vira a cabeça lentamente para olhar para você, seus olhos de vidro refletindo a luz fraca que entra pela janela quebrada.

Em uma mesa, há um diário infantil aberto. A escrita é de uma criança, mas as palavras são perturbadoras: "Papai disse que devo ser quieta quando os Homens da Parede vierem visitar."`,
                options: [
                    { text: "Pegar o diário infantil", next: "diario_infantil", sanityChange: -12 },
                    { text: "Sair do quarto rapidamente", next: "escada", sanityChange: -10 },
                    { text: "Confrontar a boneca", next: "boneca_quarto", sanityChange: -18 }
                ]
            },
            
            observar: {
                text: `Você fica parado, observando a sombra sem rosto. Ela não se move, apenas permanece no final do corredor, como se estivesse estudando você.

Seus olhos (se é que ela tem olhos) parecem fixos em você. Você sente uma pressão em sua mente, como se algo estivesse tentando entrar em seus pensamentos.

Imagens perturbadoras invadem sua mente: Clara gritando, paredes que respiram, figuras esqueléticas dançando em círculos. A sombra está tentando compartilhar visões com você.`,
                options: [
                    { text: "Tentar fechar a mente às visões", next: "fechar_mente", sanityChange: -20 },
                    { text: "Correr escada abaixo", next: "entrada", sanityChange: -15 },
                    { text: "Aceitar as visões para entender", next: "aceitar_visoes", sanityChange: -25 }
                ]
            },
            
            gritar_nome: {
                text: `Você grita o nome de Clara com toda a força de seus pulmões. A coisa que se parece com sua irmã parece vacilar por um momento. Os olhos negros piscam, e por um instante fugaz, você vê os olhos castanhos familiares de Clara.

"Irmão?", ela sussurra com sua verdadeira voz, antes que a escuridão retorne aos seus olhos. "Corra! Ele está-"

A entidade retoma o controle antes que ela possa terminar a frase, mas você viu. Clara ainda está lá dentro, lutando.`,
                options: [
                    { text: "Correr em direção a ela para tentar salvá-la", next: "armadilha", sanityChange: -20 },
                    { text: "Aproveitar a distração e quebrar o círculo", next: "quebrar_circulo", sanityChange: -10 },
                    { text: "Gritar novamente, tentando alcançar Clara", next: "gritar_novamente", sanityChange: -15 }
                ]
            },
            
            vozes_corredor: {
                text: `Você segue as vozes sussurrantes até uma porta no final do corredor. Ao abri-la, encontra um quarto escuro que parece ter sido um escritório.

As vozes param subitamente. Na mesa, uma lanterna está acesa, iluminando um diário aberto. As páginas estão cheias de desenhos perturbadores de criaturas com muitos olhos e bocas.

Uma das páginas mostra um diagrama da mansão, com um ponto marcado no sótão e as palavras: "O Umbral está aqui."`,
                options: [
                    { text: "Examinar o diagrama da mansão", next: "diagrama_mansao", sanityChange: -10 },
                    { text: "Sair do quarto e descer as escadas", next: "entrada", sanityChange: -5 },
                    { text: "Procurar por mais informações no escritório", next: "escritorio", sanityChange: -12 }
                ]
            },
            
            choramingo: {
                text: `Você segue o som de choramingo até uma porta fechada. O som vem de dentro, fraco e desesperado.

Ao abrir a porta, você encontra um quarto vazio, exceto por uma figura sentada no chão, de costas para você. Ela está vestida com as roupas de Clara.

"Clara?", você pergunta.

A figura se vira lentamente. Seu rosto está em branco, sem características. "Estou perdida", ela sussurra com a voz de Clara, mas ecoando como se viesse de um túnel distante.`,
                options: [
                    { text: "Aproximar-se da figura", next: "figura_sem_rosto", sanityChange: -20 },
                    { text: "Fechar a porta e recuar", next: "corredor", sanityChange: -15 },
                    { text: "Perguntar: 'O que aconteceu com você?'", next: "dialogo_figura", sanityChange: -18 }
                ]
            },
            
            observar_janela: {
                text: `Você continua observando as figuras no quarto. Elas começam a se mover em uníssono, girando lentamente ao redor da criatura esquelética.

A criatura no centro estica seu pescoço de maneira não natural e olha diretamente para você através da janela. Seus olhos brilham como brasas na escuridão.

Ela aponta um dedo ossudo na sua direção, e as figuras param de girar. Todas se viram para a janela, seus rostos vazios voltados para você. Elas começam a se mover em sua direção, deslizando pelo chão.`,
                options: [
                    { text: "Descer correndo da caixa e fugir", next: "fundos", sanityChange: -25 },
                    { text: "Ficar parado, hipnotizado pela cena", next: "hipnotizado_janela", sanityChange: -30 },
                    { text: "Quebrar a janela para enfrentá-los", next: "quebrar_janela", sanityChange: -20 }
                ]
            },
            
            quebrar_janela: {
                text: `Você pega uma pedra e quebra a janela. O vidro estilhaça com um som agudo. As figuras dentro do quarto emitem um grito coletivo que não é humano.

A criatura esquelética avança rapidamente em direção à janela quebrada, seus membros se contorcendo de maneira impossível. Ela estica um braço longo demais através da abertura, tentando agarrá-lo.

Você salta para trás, caindo da caixa de ferramentas. A criatura não consegue passar pela janela, mas sua mão ossuda agarra a moldura, arranhando a madeira.`,
                options: [
                    { text: "Correr para longe da janela", next: "fundos", sanityChange: -20 },
                    { text: "Tentar atacar a mão com algo", next: "ataque_mao", sanityChange: -22 },
                    { text: "Pular para dentro do quarto através da janela quebrada", next: "quarto_ritual", sanityChange: -25 }
                ]
            },
            
            barricar_porta: {
                text: `Você procura algo para barrar a porta. Encontra um baú pesado e o empurra contra a entrada. Os arranhões do lado de fora param imediatamente.

Você fica em silêncio, ouvindo. Passos se afastam, ficando mais fracos até desaparecerem completamente. A sombra foi embora.

Agora você está preso no quarto, mas pelo menos seguro por enquanto. A janela ainda está aberta, levando ao telhado inclinado.`,
                options: [
                    { text: "Esperar alguns minutos para ter certeza", next: "esperar_barricada", sanityChange: -5 },
                    { text: "Sair pela janela para o telhado", next: "telhado", sanityChange: -10 },
                    { text: "Tentar mover o baú e sair pela porta", next: "quarto_sombra", sanityChange: -8 }
                ]
            },
            
            // CENAS ADICIONAIS PARA COMPLETAR O FLUXO:
            figura_sem_rosto: {
                text: `Você se aproxima da figura. Ela levanta a cabeça, e mesmo sem rosto, você sente que está sendo observada.

"Ela está nas paredes", a figura sussurra. "Ela está em todos nós. Você não pode salvá-la. Você só pode se juntar a ela."

A figura começa a se dissolver, como fumaça, deixando apenas as roupas de Clara vazias no chão. As roupas estão frias e úmidas ao toque.`,
                options: [
                    { text: "Pegar as roupas de Clara", next: "corredor", sanityChange: -15 },
                    { text: "Sair correndo do quarto", next: "corredor", sanityChange: -12 }
                ]
            },
            
            esperar_barricada: {
                text: `Você espera em silêncio por vários minutos. Nenhum som vem do corredor. Parece seguro.

Ao se aproximar da porta, você percebe que pode mover o baú com algum esforço. A porta está intacta, e não há sinais da sombra do outro lado.

A janela ainda está aberta, levando ao telhado escorregadio.`,
                options: [
                    { text: "Mover o baú e sair pela porta", next: "corredor", sanityChange: -8 },
                    { text: "Sair pela janela para o telhado", next: "telhado", sanityChange: -10 }
                ]
            },
            
            sussurro_parede: {
                text: `Você sussurra o nome de Clara para a parede. Por um momento, nada acontece. Então, um sussurro responde de dentro da parede:

"Estou aqui... presa... ajude-me..."

A voz é de Clara, mas distante, como se estivesse do outro lado de um vidro espesso. A parede parece amolecer sob seus dedos, ficando quente e pulsante.

"Ele me colocou aqui... nas paredes...", a voz sussurra, antes de desaparecer em um último suspiro.`,
                options: [
                    { text: "Tentar quebrar a parede", next: "cozinha", sanityChange: -20 },
                    { text: "Recuar, assustado", next: "cozinha", sanityChange: -15 }
                ]
            },
            
            // CENAS DE FALLBACK PARA COMPLETAR O FLUXO:
            corredor: {
                text: `O corredor é estreito e parece se estender além do alcance da minha lanterna. As paredes estão cobertas por um papel de parede desbotado que se desprende em tiras.

De repente, sinto uma corrente de ar gelada. Alguém - ou algo - está respirando perto do meu ouvido. Viro-me rapidamente, mas não vejo nada.

No final do corredor, uma porta entreaberta emite uma luz fraca e pulsante. De outro lado, ouço o som de choramingo suave.`,
                options: [
                    { text: "Seguir em direção à luz pulsante", next: "luz_corredor", sanityChange: -12 },
                    { text: "Investigar o som de choramingo", next: "choramingo", sanityChange: -15 },
                    { text: "Voltar para o hall de entrada", next: "entrada", sanityChange: -5 }
                ]
            },
            
            janela: {
                text: `Subo em uma caixa de ferramentas enferrujada para olhar pela janela iluminada. O que vejo me paralisa de terror.

Dentro do quarto, vejo várias figuras em pé, imóveis, de costas para a janela. Elas estão dispostas em um círculo. No centro, uma criatura esquelética com membros muito longos se contorce de maneira não natural.

De repente, todas as figuras se viram ao mesmo tempo. Seus rostos são vazios, sem características. E todas estão olhando diretamente para mim.`,
                options: [
                    { text: "Descer rapidamente e fugir", next: "fundos", sanityChange: -25, escape: true },
                    { text: "Continuar observando", next: "observar_janela", sanityChange: -30 },
                    { text: "Tentar quebrar a janela", next: "quebrar_janela", sanityChange: -20 }
                ]
            },
            
            // CENAS DE FALLBACK PARA OPÇÕES QUE AINDA NÃO FORAM IMPLEMENTADAS:
            ritual_porao: {
                text: `Você examina o círculo ritualístico. Os símbolos são estranhos e antigos, e parecem brilhar fracamente no escuro. O ar ao redor do círculo está visivelmente mais frio.

Ao tocar um dos símbolos com a ponta do dedo, uma visão invade sua mente: Clara, de joelhos no centro deste mesmo círculo, cercada por figuras sombrias. Ela está gritando, mas não há som.

A visão some tão rapidamente quanto veio, deixando você tonto e com um zumbido nos ouvidos.`,
                options: [
                    { text: "Sair do porão imediatamente", next: "jardim", sanityChange: -15 },
                    { text: "Tentar apagar o círculo", next: "jardim", sanityChange: -12 },
                    { text: "Procurar por mais pistas", next: "porao_pistas", sanityChange: -10 }
                ]
            },
            
            porao_pistas: {
                text: `Você vasculha o porão e encontra uma pequena caixa de metal escondida atrás de uma pedra solta. Dentro, há cartas antigas e uma fotografia desbotada.

A foto mostra a família Blackwood, todos com expressões sérias. Atrás deles, uma figura alta e magra com o rosto borrado está de pé. Algo sobre essa figura faz seu sangue gelar.

Nas cartas, você encontra referências a "O Guardião das Paredes" e avisos para nunca convidá-lo para dentro.`,
                options: [
                    { text: "Levar as cartas consigo", next: "jardim", sanityChange: -10 },
                    { text: "Deixar tudo e sair do porão", next: "jardim", sanityChange: -8 }
                ]
            },
            
            // Cena fallback padrão (para o caso de algo realmente dar errado)
            fallback: {
                text: `Você sente que está perdendo a noção da realidade. As paredes parecem respirar, os sons se distorcem. É como se a própria mansão estivesse tentando confundi-lo.

Respire fundo. Você precisa se concentrar. Clara ainda está em algum lugar aqui, e você precisa encontrá-la.

O que você faz agora?`,
                options: [
                    { text: "Voltar para o hall de entrada", next: "entrada", sanityChange: -5 },
                    { text: "Tentar encontrar uma saída", next: "jardim", sanityChange: -3 },
                    { text: "Continuar explorando", next: "corredor", sanityChange: -8 }
                ]
            }
        };

        // CENAS DE FALLBACK SIMPLES PARA OPÇÕES NÃO IMPLEMENTADAS:
        // Estas cenas garantem que o jogo nunca quebre
        const fallbackScenes = [
            'teste_buraco', 'tunel_agua', 'tunel_sussurros', 'diario_sombras', 'saida_sala_secreta',
            'livro_caido', 'desafio_biblioteca', 'chave_sotao', 'tratado_entidades', 'bater_parede',
            'dialogo_corredor', 'porta_misteriosa', 'examinar_faca', 'diario_infantil', 'boneca_quarto',
            'fechar_mente', 'aceitar_visoes', 'gritar_novamente', 'diagrama_mansao', 'escritorio',
            'dialogo_figura', 'hipnotizado_janela', 'ataque_mao', 'quarto_ritual', 'luz_corredor',
            'desenhos_parede', 'enfrentar_biblioteca', 'distracao_fogo'
        ];

        // Criar cenas de fallback automáticas
        fallbackScenes.forEach(sceneId => {
            if (!scenes[sceneId]) {
                scenes[sceneId] = {
                    text: `Você segue adiante, determinado a encontrar Clara. A mansão parece se reorganizar à sua volta, corredores se torcendo e portas aparecendo onde antes não havia.

Sua sanidade está sendo testada, mas você não pode desistir agora. Clara precisa de você.

O que você faz?`,
                    options: [
                        { text: "Voltar para onde estava", next: previousScene || "entrada", sanityChange: -5 },
                        { text: "Continuar explorando", next: "corredor", sanityChange: -8 },
                        { text: "Descansar um momento", next: previousScene || "entrada", sanityChange: 5 }
                    ]
                };
            }
        });

        // Funções do jogo
        function showScene(sceneId) {
            // Salvar a cena anterior antes de mudar
            if (sceneId !== "restart" && scenes[sceneId]) {
                previousScene = sceneId;
            }
            
            const scene = scenes[sceneId] || scenes.fallback;
            const sceneTextElement = document.getElementById('scene-text');
            const optionsContainer = document.getElementById('options-container');
            const sceneContainer = document.getElementById('scene-container');
            
            // Atualizar texto da cena
            sceneTextElement.textContent = scene.text;
            sceneTextElement.classList.remove('typing');
            void sceneTextElement.offsetWidth; // Trigger reflow
            sceneTextElement.classList.add('typing');
            
            // Limpar opções anteriores
            optionsContainer.innerHTML = '';
            
            // Adicionar classe de perigo se for uma cena de escape
            if (scene.options && scene.options.some(opt => opt.escape)) {
                sceneContainer.classList.add('danger');
                sceneTextElement.classList.add('danger-text');
            } else {
                sceneContainer.classList.remove('danger');
                sceneTextElement.classList.remove('danger-text');
            }
            
            // Filtrar opções disponíveis com base nas condições
            let availableOptions = scene.options.filter(option => {
                return !option.condition || option.condition();
            });
            
            // Se não houver opções disponíveis, criar uma opção de fallback
            if (availableOptions.length === 0) {
                availableOptions = [{ text: "Continuar", next: previousScene || "entrada" }];
            }
            
            // Adicionar opções ao container
            availableOptions.forEach(option => {
                const button = document.createElement('button');
                button.className = 'option-button';
                if (option.escape) {
                    button.classList.add('escape-option');
                }
                
                button.innerHTML = `<span>${option.text}</span>`;
                
                button.addEventListener('click', () => {
                    // Aplicar mudança de sanidade, se houver
                    if (option.sanityChange) {
                        updateSanity(option.sanityChange);
                    }
                    
                    // Ir para próxima cena
                    if (option.next === "restart") {
                        restartGame();
                    } else {
                        showScene(option.next);
                    }
                });
                
                optionsContainer.appendChild(button);
            });
            
            // Atualizar estado do jogo
            gameState.currentScene = sceneId;
        }
        
        function updateSanity(value) {
            sanity += value;
            
            // Limitar sanidade entre 0 e 100
            sanity = Math.max(0, Math.min(100, sanity));
            
            // Atualizar display
            const sanityValueElement = document.getElementById('sanity-value');
            const sanityFillElement = document.getElementById('sanity-fill');
            
            sanityValueElement.textContent = `${sanity}%`;
            sanityFillElement.style.width = `${sanity}%`;
            
            // Alterar cor se a sanidade estiver baixa
            if (sanity < 30) {
                sanityFillElement.classList.add('sanity-low');
                document.getElementById('scene-container').classList.add('flicker');
            } else {
                sanityFillElement.classList.remove('sanity-low');
                document.getElementById('scene-container').classList.remove('flicker');
            }
            
            // Game over se a sanidade chegar a 0
            if (sanity <= 0) {
                gameOver("SANIDADE ESGOTADA", "A mansão consumiu sua mente. Você agora vagueia pelos corredores, um eco vazio do que um dia foi, preso para sempre nas memórias da Mansão Blackwood.");
            }
        }
        
        function gameOver(title, text) {
            const sceneContainer = document.getElementById('scene-container');
            sceneContainer.innerHTML = `
                <div class="game-over">
                    <h2>${title}</h2>
                    <p>${text}</p>
                    <button class="restart-button" id="restart-button">TENTAR NOVAMENTE</button>
                </div>
            `;
            
            document.getElementById('restart-button').addEventListener('click', restartGame);
        }
        
        function restartGame() {
            // Resetar estado do jogo
            sanity = 100;
            gameState = {};
            previousScene = null;
            
            // Atualizar display de sanidade
            const sanityValueElement = document.getElementById('sanity-value');
            const sanityFillElement = document.getElementById('sanity-fill');
            
            sanityValueElement.textContent = "100%";
            sanityFillElement.style.width = "100%";
            sanityFillElement.classList.remove('sanity-low');
            document.getElementById('scene-container').classList.remove('flicker');
            document.getElementById('scene-container').classList.remove('danger');
            
            // Voltar para a cena inicial
            showScene("start");
        }
        
        // Inicializar o jogo quando o DOM estiver carregado
        document.addEventListener('DOMContentLoaded', () => {
            showScene("start");
        });
    </script>
</body>
</html>