<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A Mans√£o Sombria</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Courier New', monospace;
        }
        
        body {
            background-color: #0a0a0a;
            color: #e0e0e0;
            line-height: 1.6;
            overflow-x: hidden;
            position: relative;
            min-height: 100vh;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 10;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            border-bottom: 2px solid #8b0000;
            position: relative;
        }
        
        h1 {
            font-size: 2.5rem;
            color: #b30000;
            text-shadow: 0 0 10px #8b0000;
            letter-spacing: 2px;
            margin-bottom: 10px;
        }
        
        .subtitle {
            color: #a0a0a0;
            font-size: 1.2rem;
        }
        
        .game-area {
            display: flex;
            flex-direction: column;
            gap: 25px;
        }
        
        .sanity-container {
            background-color: #111;
            border: 1px solid #333;
            border-radius: 5px;
            padding: 15px;
            box-shadow: 0 0 15px rgba(139, 0, 0, 0.3);
        }
        
        .sanity-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }
        
        .sanity-bar {
            height: 25px;
            background-color: #222;
            border-radius: 3px;
            overflow: hidden;
            position: relative;
        }
        
        .sanity-fill {
            height: 100%;
            width: 100%;
            background: linear-gradient(to right, #006400, #00aa00, #ffff00, #ff6600, #ff0000);
            transition: width 0.5s ease;
        }
        
        .sanity-text {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            text-shadow: 1px 1px 2px #000;
        }
        
        .story-container {
            background-color: #111;
            border: 1px solid #333;
            border-radius: 5px;
            padding: 20px;
            min-height: 200px;
            box-shadow: 0 0 15px rgba(139, 0, 0, 0.3);
        }
        
        .story-text {
            font-size: 1.2rem;
            margin-bottom: 20px;
            line-height: 1.8;
        }
        
        .choices-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .choice-btn {
            background-color: #222;
            border: 1px solid #444;
            color: #e0e0e0;
            padding: 15px;
            text-align: left;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }
        
        .choice-btn:hover {
            background-color: #2a2a2a;
            border-color: #8b0000;
            transform: translateY(-2px);
            box-shadow: 0 5px 10px rgba(139, 0, 0, 0.2);
        }
        
        .choice-btn:active {
            transform: translateY(1px);
        }
        
        .choice-btn::before {
            content: ">";
            position: absolute;
            left: 10px;
            opacity: 0.5;
        }
        
        .game-over {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.9);
            z-index: 100;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            text-align: center;
            padding: 20px;
        }
        
        .game-over h2 {
            font-size: 3rem;
            color: #ff0000;
            margin-bottom: 20px;
            text-shadow: 0 0 15px #ff0000;
        }
        
        .game-over p {
            font-size: 1.5rem;
            margin-bottom: 30px;
            max-width: 600px;
        }
        
        .restart-btn {
            background-color: #8b0000;
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.2rem;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .restart-btn:hover {
            background-color: #a30000;
            transform: scale(1.05);
        }
        
        .effects {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }
        
        .flicker {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.03);
            opacity: 0;
            animation: flicker 8s infinite;
        }
        
        @keyframes flicker {
            0%, 100% { opacity: 0; }
            5%, 95% { opacity: 0.03; }
            10%, 90% { opacity: 0; }
            15%, 85% { opacity: 0.05; }
            20%, 80% { opacity: 0; }
            25%, 75% { opacity: 0.02; }
            30%, 70% { opacity: 0; }
            35%, 65% { opacity: 0.04; }
            40%, 60% { opacity: 0; }
            45%, 55% { opacity: 0.03; }
            50% { opacity: 0; }
        }
        
        .footsteps {
            position: absolute;
            bottom: 20px;
            left: 0;
            width: 100%;
            text-align: center;
            color: #666;
            font-size: 0.9rem;
            opacity: 0.7;
        }
        
        .sound-toggle {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: #222;
            color: #e0e0e0;
            border: 1px solid #444;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            z-index: 1000;
            font-size: 1.2rem;
        }
        
        .sound-toggle:hover {
            background-color: #2a2a2a;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            .choices-container {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="effects">
        <div class="flicker"></div>
    </div>
    
    <div class="sound-toggle" id="soundToggle">üîä</div>
    
    <div class="container">
        <header>
            <h1>A MANS√ÉO SOMBRIA</h1>
            <p class="subtitle">Sua sanidade determinar√° seu destino</p>
        </header>
        
        <div class="game-area">
            <div class="sanity-container">
                <div class="sanity-label">
                    <span>SANIDADE</span>
                    <span id="sanityValue">100%</span>
                </div>
                <div class="sanity-bar">
                    <div class="sanity-fill" id="sanityFill"></div>
                    <div class="sanity-text" id="sanityText">Est√°vel</div>
                </div>
            </div>
            
            <div class="story-container">
                <div class="story-text" id="storyText">
                    Voc√™ est√° parado diante da Mans√£o Blackwood, uma constru√ß√£o antiga e decadente que h√° anos √© evitada pelos moradores da cidade. A noite est√° escura, sem luar, e o vento sussurra entre as √°rvores mortas do jardim. Voc√™ est√° aqui porque sua irm√£ desapareceu ap√≥s entrar nesta mans√£o tr√™s dias atr√°s. As √∫nicas pistas que voc√™ tem s√£o uma carta enigm√°tica e um di√°rio antigo que ela deixou para tr√°s. A porta da frente est√° entreaberta, rangendo levemente com o vento. O que voc√™ faz?
                </div>
                
                <div class="choices-container" id="choicesContainer">
                    <!-- As escolhas ser√£o inseridas aqui pelo JavaScript -->
                </div>
            </div>
        </div>
        
        <div class="footsteps" id="footstepsText"></div>
    </div>
    
    <div class="game-over" id="gameOverScreen">
        <h2 id="gameOverTitle">FIM DE JOGO</h2>
        <p id="gameOverText"></p>
        <button class="restart-btn" id="restartBtn">JOGAR NOVAMENTE</button>
    </div>

    <audio id="bgSound" loop>
        <source src="https://assets.mixkit.co/music/preview/mixkit-dark-ambience-388.mp3" type="audio/mpeg">
    </audio>
    
    <audio id="clickSound">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-select-click-1109.mp3" type="audio/mpeg">
    </audio>
    
    <audio id="sanityLowSound">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-heartbeat-1184.mp3" type="audio/mpeg">
    </audio>
    
    <audio id="gameOverSound">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-wrong-answer-fail-notification-946.mp3" type="audio/mpeg">
    </audio>

    <script>
        // Elementos do DOM
        const storyText = document.getElementById('storyText');
        const choicesContainer = document.getElementById('choicesContainer');
        const sanityFill = document.getElementById('sanityFill');
        const sanityText = document.getElementById('sanityText');
        const sanityValue = document.getElementById('sanityValue');
        const gameOverScreen = document.getElementById('gameOverScreen');
        const gameOverTitle = document.getElementById('gameOverTitle');
        const gameOverText = document.getElementById('gameOverText');
        const restartBtn = document.getElementById('restartBtn');
        const footstepsText = document.getElementById('footstepsText');
        const soundToggle = document.getElementById('soundToggle');
        
        // Elementos de √°udio
        const bgSound = document.getElementById('bgSound');
        const clickSound = document.getElementById('clickSound');
        const sanityLowSound = document.getElementById('sanityLowSound');
        const gameOverSound = document.getElementById('gameOverSound');
        
        // Estado do jogo
        let gameState = {
            sanity: 100,
            currentScene: "start",
            soundEnabled: true,
            visitedScenes: new Set(["start"])
        };
        
        // Sistema de √°udio
        soundToggle.addEventListener('click', () => {
            gameState.soundEnabled = !gameState.soundEnabled;
            soundToggle.textContent = gameState.soundEnabled ? "üîä" : "üîá";
            
            if (gameState.soundEnabled) {
                bgSound.play().catch(e => console.log("Autoplay bloqueado pelo navegador"));
            } else {
                bgSound.pause();
            }
        });
        
        // Iniciar √°udio de fundo (com tratamento para autoplay policies)
        setTimeout(() => {
            if (gameState.soundEnabled) {
                bgSound.volume = 0.3;
                bgSound.play().catch(e => console.log("Autoplay bloqueado pelo navegador"));
            }
        }, 1000);
        
        // Textos de passos aleat√≥rios
        const footstepsMessages = [
            "Voc√™ ouve passos ao longe...",
            "O vento geme atrav√©s das frestas...",
            "Um rangido vem do andar de cima...",
            "Voc√™ sente que n√£o est√° sozinho...",
            "Um sussurro quase inaud√≠vel...",
            "Algo se move nas sombras...",
            "Um cheiro de mofo e decad√™ncia...",
            "Seus instintos dizem para sair daqui..."
        ];
        
        // Atualizar o texto de passos aleatoriamente
        function updateFootsteps() {
            if (Math.random() > 0.7) {
                const randomMessage = footstepsMessages[Math.floor(Math.random() * footstepsMessages.length)];
                footstepsText.textContent = randomMessage;
                
                // Remover ap√≥s alguns segundos
                setTimeout(() => {
                    footstepsText.textContent = "";
                }, 5000);
            }
        }
        
        // Iniciar atualiza√ß√£o peri√≥dica
        setInterval(updateFootsteps, 10000);
        
        // Cenas do jogo
        const scenes = {
            start: {
                text: "Voc√™ est√° parado diante da Mans√£o Blackwood, uma constru√ß√£o antiga e decadente que h√° anos √© evitada pelos moradores da cidade. A noite est√° escura, sem luar, e o vento sussurra entre as √°rvores mortas do jardim. Voc√™ est√° aqui porque sua irm√£ desapareceu ap√≥s entrar nesta mans√£o tr√™s dias atr√°s. As √∫nicas pistas que voc√™ tem s√£o uma carta enigm√°tica e um di√°rio antigo que ela deixou para tr√°s. A porta da frente est√° entreaberta, rangendo levemente com o vento. O que voc√™ faz?",
                choices: [
                    { text: "Entrar pela porta da frente", next: "entrance", sanityChange: -5 },
                    { text: "Dar a volta e tentar uma entrada pelos fundos", next: "backdoor", sanityChange: 0 },
                    { text: "Procurar por uma janela aberta", next: "window", sanityChange: -2 },
                    { text: "Desistir e voltar para a cidade", next: "giveup", sanityChange: 10 }
                ]
            },
            entrance: {
                text: "Voc√™ empurra a pesada porta de madeira, que range alto ao se mover. O interior da mans√£o √© ainda mais escuro que o exterior, e o ar √© pesado com o cheiro de mofo e algo mais... met√°lico. Na entrada, h√° um grande hall com uma escadaria que leva ao andar superior. √Ä sua esquerda, uma porta entreaberta revela o que parece ser uma sala de estar. √Ä direita, um corredor escuro. No ch√£o, voc√™ v√™ pegadas recentes na poeira. Elas parecem levar para cima.",
                choices: [
                    { text: "Seguir as pegadas pela escada", next: "stairs", sanityChange: -8 },
                    { text: "Investigar a sala √† esquerda", next: "livingroom", sanityChange: -3 },
                    { text: "Explorar o corredor √† direita", next: "corridor", sanityChange: -5 },
                    { text: "Voltar para fora e reconsiderar", next: "start", sanityChange: 5 }
                ]
            },
            backdoor: {
                text: "Voc√™ contorna a mans√£o, trope√ßando em arbustos mortos e detritos. Os fundos s√£o ainda mais sombrios, com uma velha cozinha de servi√ßo cuja porta est√° parcialmente destru√≠da. Ao entrar, voc√™ v√™ um fog√£o antigo, uma mesa coberta com utens√≠lios enferrujados e algo que parece ser sangue seco no ch√£o. H√° uma porta que leva para dentro da mans√£o e uma escada estreita que desce para um por√£o.",
                choices: [
                    { text: "Entrar na mans√£o pela cozinha", next: "kitchen", sanityChange: -4 },
                    { text: "Descer a escada para o por√£o", next: "basement", sanityChange: -12 },
                    { text: "Procurar por pistas na cozinha", next: "kitchen_clues", sanityChange: -6 },
                    { text: "Sair e voltar para a frente da mans√£o", next: "start", sanityChange: 0 }
                ]
            },
            window: {
                text: "Voc√™ anda ao redor da mans√£o, encontrando v√°rias janelas, mas todas est√£o trancadas ou emperradas. Finalmente, no lado leste, voc√™ encontra uma janela quebrada, grande o suficiente para passar. Ao entrar, voc√™ se encontra em uma biblioteca empoeirada. Estantes cheias de livros antigos cobrem as paredes. No centro da sala, uma poltrona est√° virada para uma lareira apagada. No ch√£o, perto da poltrona, voc√™ v√™ um livro aberto com uma marca√ß√£o.",
                choices: [
                    { text: "Examinar o livro aberto", next: "book", sanityChange: -8 },
                    { text: "Procurar por uma sa√≠da da biblioteca", next: "library_exit", sanityChange: -3 },
                    { text: "Investigar as estantes de livros", next: "bookshelves", sanityChange: -5 },
                    { text: "Voltar pela janela", next: "start", sanityChange: 2 }
                ]
            },
            giveup: {
                text: "Voc√™ decide que isso √© loucura. A mans√£o tem uma reputa√ß√£o terr√≠vel e voc√™ n√£o est√° preparado para enfrentar o que possa estar l√° dentro. Vira as costas e come√ßa a caminhar de volta para a cidade, prometendo a si mesmo que vai chamar as autoridades pela manh√£. Mas conforme voc√™ se afasta, voc√™ jura ouvir um grito abafado vindo da mans√£o... o grito de sua irm√£. Sua sanidade se recupera um pouco, mas a culpa come√ßa a consumi-lo.",
                choices: [
                    { text: "Correr de volta para a mans√£o", next: "start", sanityChange: -15 },
                    { text: "Continuar para a cidade", next: "city", sanityChange: 20 }
                ]
            },
            stairs: {
                text: "Voc√™ sobe as escadas, cada degrau rangendo sob seu peso. No topo, um longo corredor se estende √† sua frente, com v√°rias portas de cada lado. O corredor √© iluminado apenas por uma fraca luz lunar que entra por uma janela no final. De repente, voc√™ ouve um choro abafado vindo de uma das portas √† sua direita. Ao mesmo tempo, uma sombra parece se mover na extremidade do corredor.",
                choices: [
                    { text: "Seguir o som do choro", next: "crying_room", sanityChange: -10 },
                    { text: "Investigar a sombra no final do corredor", next: "shadow", sanityChange: -15 },
                    { text: "Abrir a primeira porta √† esquerda", next: "bedroom", sanityChange: -7 },
                    { text: "Voltar descer as escadas", next: "entrance", sanityChange: 3 }
                ]
            },
            crying_room: {
                text: "Voc√™ segue o som do choro at√© uma porta que est√° levemente entreaberta. Ao empurr√°-la, voc√™ encontra um quarto de crian√ßa, decorado com brinquedos antigos e um ber√ßo. No centro do quarto, uma figura pequena est√° de costas para voc√™, chorando. Quando ela se vira, voc√™ v√™ que n√£o tem rosto, apenas uma superf√≠cie lisa e p√°lida. Ela estende uma m√£o em sua dire√ß√£o e sussurra: 'Por que voc√™ demorou tanto?'",
                choices: [
                    { text: "Correr para fora do quarto", next: "stairs", sanityChange: -20 },
                    { text: "Perguntar sobre sua irm√£", next: "ask_sister", sanityChange: -15 },
                    { text: "Tentar ajudar a criatura", next: "help_creature", sanityChange: -25 },
                    { text: "Fechar os olhos e contar at√© dez", next: "stairs", sanityChange: -10 }
                ]
            },
            city: {
                text: "Voc√™ chega √† cidade e vai direto para a delegacia. Os policiais ouvem sua hist√≥ria com ceticismo, mas concordam em investigar pela manh√£. Quando o sol nasce, um grupo vai at√© a mans√£o, mas n√£o encontram nada al√©m de uma casa velha e vazia. Sua irm√£ nunca √© encontrada. Anos depois, voc√™ ainda tem pesadelos com a mans√£o e ouve choros √† noite. Sua sanidade se recuperou, mas voc√™ nunca mais ser√° o mesmo.",
                gameOver: true,
                title: "FIM SEGURO... MAS A QUE CUSTO?",
                ending: "Voc√™ sobreviveu, mas abandonou sua irm√£. Sua sanidade est√° intacta, mas sua consci√™ncia nunca lhe dar√° paz."
            },
            basement: {
                text: "A escada para o por√£o range perigosamente sob seus p√©s. Ao chegar abaixo, o cheiro de decomposi√ß√£o √© quase insuport√°vel. O por√£o √© √∫mido e escuro, com apenas uma pequena janela suja deixando entrar um pouco de luz lunar. Voc√™ acende uma luz fraca e v√™ que o lugar est√° cheio de velhos m√≥veis cobertos com len√ß√≥is. No centro, h√° uma mesa de madeira com correntes e manchas escuras. De repente, voc√™ ouve um barulho de arrastar vindo de um canto escuro.",
                choices: [
                    { text: "Investigar o barulho", next: "noise", sanityChange: -25 },
                    { text: "Examinar a mesa com correntes", next: "table", sanityChange: -20 },
                    { text: "Correr de volta para cima", next: "backdoor", sanityChange: -15 },
                    { text: "Esconder-se atr√°s dos m√≥veis", next: "hide", sanityChange: -10 }
                ]
            },
            noise: {
                text: "Voc√™ se aproxima cautelosamente do canto escuro. Seus olhos gradualmente se ajustam √† escurid√£o, e voc√™ v√™ uma figura encolhida no ch√£o. Quando ela levanta a cabe√ßa, voc√™ reconhece o rosto p√°lido e assustado de sua irm√£! 'Voc√™ veio!' ela sussurra. 'Temos que sair daqui agora! Ele vai voltar a qualquer momento!' Antes que voc√™ possa responder, voc√™ ouve passos pesados descendo as escadas.",
                choices: [
                    { text: "Fugir com sua irm√£ pela sa√≠da dos fundos", next: "escape", sanityChange: 30 },
                    { text: "Enfrentar o que est√° vindo", next: "confront", sanityChange: -30 },
                    { text: "Esconder-se com sua irm√£", next: "hide_together", sanityChange: -15 },
                    { text: "Perguntar quem √© 'ele'", next: "ask_who", sanityChange: -20 }
                ]
            },
            escape: {
                text: "Voc√™ agarra sua irm√£ pela m√£o e os dois correm para a escada, subindo dois degraus de cada vez. Os passos pesados est√£o logo atr√°s de voc√™s. Voc√™s alcan√ßam a cozinha e saem correndo pelos fundos, n√£o parando at√© chegarem √† floresta. Quando olham para tr√°s, a mans√£o parece encolher na dist√¢ncia. Voc√™s conseguem chegar √† cidade e chamar a pol√≠cia. Quando eles retornam √† mans√£o, n√£o encontram ningu√©m, mas descobrem evid√™ncias de atividades sinistras. Voc√™s sobrevivem, mas ambos est√£o marcados pela experi√™ncia.",
                gameOver: true,
                title: "FUGITIVOS",
                ending: "Voc√™ resgatou sua irm√£ e escapou da mans√£o. Sua sanidade est√° abalada, mas voc√™s est√£o vivos e juntos."
            },
            confront: {
                text: "Voc√™ se posiciona na frente de sua irm√£, pronto para enfrentar o que quer que esteja descendo as escadas. Uma figura alta e distorcida aparece, com membros muito longos e um rosto sem caracter√≠sticas definidas. 'Outro visitante', sussurra uma voz que parece vir de todos os lados ao mesmo tempo. Voc√™ sente uma dor de cabe√ßa excruciante enquanto a criatura se aproxima. Sua sanidade se esvai completamente enquanto a criatura alcan√ßa voc√™...",
                gameOver: true,
                title: "SANIDADE PERDIDA",
                ending: "Voc√™ enfrentou o horror diretamente e sua mente n√£o conseguiu suportar. Sua sanidade chegou a zero e voc√™ se tornou mais uma v√≠tima da Mans√£o Blackwood."
            },
            // Mais cenas continuariam aqui...
            kitchen: {
                text: "Voc√™ entra na mans√£o pela cozinha. O lugar est√° em estado lastim√°vel, com m√≥veis quebrados e utens√≠lios espalhados pelo ch√£o. Na mesa, voc√™ encontra uma lanterna que ainda funciona. Ao lig√°-la, voc√™ v√™ portas que levam para um corredor e para uma despensa. De repente, voc√™ ouve um barulho vindo da despensa.",
                choices: [
                    { text: "Investigar a despensa", next: "pantry", sanityChange: -8 },
                    { text: "Seguir pelo corredor", next: "hallway", sanityChange: -5 },
                    { text: "Procurar por armas", next: "weapons", sanityChange: -2 },
                    { text: "Voltar para fora", next: "backdoor", sanityChange: 3 }
                ]
            }
        };
        
        // Fun√ß√£o para atualizar a barra de sanidade
        function updateSanity(change) {
            gameState.sanity += change;
            
            // Limitar sanidade entre 0 e 100
            if (gameState.sanity > 100) gameState.sanity = 100;
            if (gameState.sanity < 0) gameState.sanity = 0;
            
            // Atualizar visualmente
            sanityFill.style.width = `${gameState.sanity}%`;
            sanityValue.textContent = `${gameState.sanity}%`;
            
            // Atualizar texto descritivo
            let sanityStatus = "";
            if (gameState.sanity >= 80) sanityStatus = "Est√°vel";
            else if (gameState.sanity >= 60) sanityStatus = "Levemente Abalada";
            else if (gameState.sanity >= 40) sanityStatus = "Abalada";
            else if (gameState.sanity >= 20) sanityStatus = "Cr√≠tica";
            else sanityStatus = "√Ä Beira da Loucura";
            
            sanityText.textContent = sanityStatus;
            
            // Efeito de √°udio quando a sanidade est√° baixa
            if (gameState.sanity < 30 && gameState.soundEnabled) {
                sanityLowSound.play().catch(e => console.log("Erro no √°udio"));
            }
            
            // Verificar se a sanidade chegou a zero
            if (gameState.sanity <= 0) {
                gameOver("Sua sanidade se esgotou completamente. A realidade desmorona ao seu redor e voc√™ perde o controle de sua mente, tornando-se mais uma alma perdida da Mans√£o Blackwood.", "SANIDADE ESGOTADA");
            }
        }
        
        // Fun√ß√£o para mostrar cena
        function showScene(sceneId) {
            const scene = scenes[sceneId];
            
            if (!scene) {
                console.error(`Cena "${sceneId}" n√£o encontrada!`);
                return;
            }
            
            gameState.currentScene = sceneId;
            gameState.visitedScenes.add(sceneId);
            
            // Atualizar texto da hist√≥ria
            storyText.textContent = scene.text;
            
            // Limpar escolhas anteriores
            choicesContainer.innerHTML = "";
            
            // Se for um fim de jogo
            if (scene.gameOver) {
                gameOver(scene.ending, scene.title);
                return;
            }
            
            // Adicionar novas escolhas
            scene.choices.forEach((choice, index) => {
                const button = document.createElement("button");
                button.className = "choice-btn";
                button.textContent = choice.text;
                
                // Adicionar efeito de j√° visitada
                if (gameState.visitedScenes.has(choice.next)) {
                    button.style.opacity = "0.8";
                    button.style.borderStyle = "dashed";
                }
                
                button.addEventListener('click', () => {
                    // Efeito sonoro
                    if (gameState.soundEnabled) {
                        clickSound.currentTime = 0;
                        clickSound.play().catch(e => console.log("Erro no √°udio"));
                    }
                    
                    // Atualizar sanidade
                    updateSanity(choice.sanityChange);
                    
                    // Mostrar pr√≥xima cena
                    setTimeout(() => showScene(choice.next), 300);
                });
                
                choicesContainer.appendChild(button);
            });
        }
        
        // Fun√ß√£o de fim de jogo
        function gameOver(message, title) {
            gameOverTitle.textContent = title;
            gameOverText.textContent = message;
            gameOverScreen.style.display = "flex";
            
            // Tocar som de game over
            if (gameState.soundEnabled) {
                gameOverSound.play().catch(e => console.log("Erro no √°udio"));
                bgSound.pause();
            }
        }
        
        // Reiniciar jogo
        restartBtn.addEventListener('click', () => {
            // Resetar estado do jogo
            gameState = {
                sanity: 100,
                currentScene: "start",
                soundEnabled: gameState.soundEnabled,
                visitedScenes: new Set(["start"])
            };
            
            // Resetar sanidade visualmente
            sanityFill.style.width = "100%";
            sanityValue.textContent = "100%";
            sanityText.textContent = "Est√°vel";
            
            // Esconder tela de game over
            gameOverScreen.style.display = "none";
            
            // Reiniciar √°udio de fundo
            if (gameState.soundEnabled) {
                bgSound.currentTime = 0;
                bgSound.play().catch(e => console.log("Autoplay bloqueado pelo navegador"));
            }
            
            // Mostrar cena inicial
            showScene("start");
        });
        
        // Iniciar jogo
        showScene("start");
        
        // Inicializar efeitos de passos
        updateFootsteps();
    </script>
</body>
</html>
